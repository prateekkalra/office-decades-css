for (const part of parts) {
    if (current.children && current.children[part]) {
        current = current.children[part];
    } else {
        return null;
    }
}

return current;
}

function getFile(path) {
const parts = path.split('/');
const filename = parts.pop();
const dirPath = parts.join('/');
const dir = getDirectory(dirPath);

return dir && dir.children && dir.children[filename];
}

function searchFiles(path, pattern, results) {
const dir = getDirectory(path);
if (!dir || !dir.children) return;

Object.entries(dir.children).forEach(([name, item]) => {
    if (name.toLowerCase().includes(pattern.toLowerCase())) {
        results.push(path + '/' + name);
    }
    if (item.type === 'dir') {
        searchFiles(path + '/' + name, pattern, results);
    }
});
}

function generateProgressBar(percentage) {
const filled = Math.floor(percentage / 10);
const empty = 10 - filled;
return '[' + '█'.repeat(filled) + '░'.repeat(empty) + '] ' + percentage + '%';
}

function generateTaskTable() {
let output = `
<div class="output-line info">┌─ TASK QUEUE ───────────────────────────────────────────┐</div>
<div class="output-line">│ ID   │ PRIORITY │ TASK                    │ DUE    │ ✓ │</div>
<div class="output-line">├──────┼──────────┼─────────────────────────┼────────┼───┤</div>`;

state.tasks.forEach(task => {
    const check = task.completed ? '✓' : '□';
    const priority = task.priority.toUpperCase().padEnd(8);
    const text = task.text.padEnd(23).substring(0, 23);
    const due = task.due.padEnd(6);
    output += `<div class="output-line">│ ${task.id.toString().padEnd(4)} │ ${priority} │ ${text} │ ${due} │ ${check} │</div>`;
});

output += '<div class="output-line">└──────┴──────────┴─────────────────────────┴────────┴───┘</div>';

const completed = state.tasks.filter(t => t.completed).length;
const percentage = Math.round((completed / state.tasks.length) * 100);
output += `<div class="output-line success">Progress: ${generateProgressBar(percentage)}</div>`;

return output;
}

function generateMonthView() {
const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                  'July', 'August', 'September', 'October', 'November', 'December'];
const month = monthNames[state.currentMonth];
const year = state.currentYear;

let output = `<div class="output-line info">┌─ ${month.toUpperCase()} ${year} ─────────────────────────────────┐</div>`;
output += '<div class="output-line">│ Sun  Mon  Tue  Wed  Thu  Fri  Sat            │</div>';
output += '<div class="output-line">├───────────────────────────────────────────────┤</div>';

const firstDay = new Date(year, state.currentMonth, 1).getDay();
const daysInMonth = new Date(year, state.currentMonth + 1, 0).getDate();
const today = new Date().getDate();

let line = '│ ';
let dayCount = 1;

// Empty cells before first day
for (let i = 0; i < firstDay; i++) {
    line += '     ';
}

// Days of month
for (let day = 1; day <= daysInMonth; day++) {
    const isToday = day === today && state.currentMonth === new Date().getMonth();
    const dayStr = isToday ? `[${day.toString().padStart(2)}]` : day.toString().padStart(3);
    line += dayStr + '  ';
    
    if ((firstDay + day) % 7 === 0 || day === daysInMonth) {
        line = line.padEnd(47) + '│';
        output += `<div class="output-line">${line}</div>`;
        line = '│ ';
    }
}

output += '<div class="output-line">└───────────────────────────────────────────────┘</div>';
return output;
}

function generateChatView() {
return `
<div class="output-line info">┌─ CHAT: #GENERAL ───────────────────────────────────────┐</div>
<div class="output-line">│ <span class="help-command-name">[09:15] system:</span> Good morning, team! ☀️              │</div>
<div class="output-line">│ <span class="help-command-name">[09:23] alice.dev:</span> Morning! Ready for standup?       │</div>
<div class="output-line">│ <span class="help-command-name">[09:24] bob.qa:</span> Just found an interesting bug...     │</div>
<div class="output-line">│ <span class="help-command-name">[09:25] carol.pm:</span> Oh no, is it a blocker?           │</div>
<div class="output-line">│ <span class="help-command-name">[09:26] bob.qa:</span> Nah, just UI glitch. Easy fix       │</div>
<div class="output-line">│ <span class="help-command-name">[09:27] dave.design:</span> Send me a screenshot?          │</div>
<div class="output-line">│ <span class="help-command-name">[09:28] alice.dev:</span> I can fix that after standup     │</div>
<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ 👥 ONLINE: 12 | 💬 Type 'chat "message"' to send      │</div>
<div class="output-line">└────────────────────────────────────────────────────────┘</div>`;
}

function generateCoffeeStatus() {
return `
<div class="output-line info">┌─ COFFEE CENTRAL ───────────────────────────────────────┐</div>
<div class="output-line">│ MACHINE STATUS:                                        │</div>
<div class="output-line">│ ☕ Kitchen-A  │ 🟢 Ready    │ ████████░░ │ Beans: 82% │</div>
<div class="output-line">│ ☕ Kitchen-B  │ 🟡 Low Beans│ ██░░░░░░░░ │ Beans: 23% │</div>
<div class="output-line">│ ☕ Dev Floor  │ 🟢 Ready    │ █████████░ │ Beans: 91% │</div>
<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ CURRENT QUEUE:                                         │</div>
<div class="output-line">│ 1. alice.dev    - Cappuccino Large    (preparing...)   │</div>
<div class="output-line">│ 2. bob.design   - Americano Medium    (2 min wait)     │</div>
<div class="output-line">│ 3. carol.pm     - Latte with Extra Shot (4 min wait)   │</div>
<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ QUICK ORDER: coffee order [drink]                      │</div>
<div class="output-line">│ Popular: Cappuccino, Americano, Latte, Espresso       │</div>
<div class="output-line">└────────────────────────────────────────────────────────┘</div>`;
}

function generateRoomStatus() {
return `
<div class="output-line info">┌─ MEETING ROOMS ────────────────────────────────────────┐</div>
<div class="output-line">│ ROOM      │ STATUS     │ CURRENT/NEXT               │CAP│</div>
<div class="output-line">├───────────┼────────────┼────────────────────────────┼───┤</div>
<div class="output-line">│ Conf-A    │ 🟢 FREE    │ Available until 15:00      │12 │</div>
<div class="output-line">│ Conf-B    │ 🔴 BUSY    │ Product Review (30m left)  │ 8 │</div>
<div class="output-line">│ Dev-Room  │ 🟢 FREE    │ Next: Code Review @ 16:00  │ 6 │</div>
<div class="output-line">│ Exec-Suite│ 🔴 BUSY    │ Board Meeting (2h left)    │20 │</div>
<div class="output-line">│ Phone-1   │ 🟢 FREE    │ Available all day          │ 2 │</div>
<div class="output-line">│ Phone-2   │ 🟡 ENDING  │ 1:1 Call (5m left)         │ 2 │</div>
<div class="output-line">├───────────┴────────────┴────────────────────────────┴───┤</div>
<div class="output-line">│ 🔧 Equipment: 📽️=Projector 📺=Screen 🖊️=Whiteboard    │</div>
<div class="output-line">│ Book with: rooms book [room] [time]                    │</div>
<div class="output-line">└─────────────────────────────────────────────────────────┘</div>`;
}

function generateUserProfile(username) {
const profiles = {
    'alice': {
        name: 'Alice Chen',
        role: 'Senior Software Engineer',
        team: 'Platform Team',
        location: 'San Francisco, CA',
        desk: '42A',
        email: 'alice.chen@terminalcorp.com',
        skills: ['JavaScript', 'Python', 'Docker', 'AWS', 'React'],
        status: '🟢 Coding',
        coffee: 'Oat Milk Latte',
        birthday: 'April 15'
    },
    'bob': {
        name: 'Bob Smith',
        role: 'UX Designer',
        team: 'Design Team',
        location: 'New York, NY',
        desk: '18B',
        email: 'bob.smith@terminalcorp.com',
        skills: ['Figma', 'Sketch', 'CSS', 'User Research'],
        status: '🟡 In Meeting',
        coffee: 'Americano',
        birthday: 'September 3'
    }
};

const profile = profiles[username] || profiles['alice'];

return `
<div class="output-line info">┌─ EMPLOYEE PROFILE ─────────────────────────────────────┐</div>
<div class="output-line">│ 👤 ${profile.name.toUpperCase()}                                      │</div>
<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ 💼 ${profile.role.padEnd(40)}       │</div>
<div class="output-line">│ 👥 ${profile.team.padEnd(40)}       │</div>
<div class="output-line">│ 📍 ${profile.location.padEnd(40)}       │</div>
<div class="output-line">│ 🏢 Desk: ${profile.desk.padEnd(37)}       │</div>
<div class="output-line">│ 📧 ${profile.email.padEnd(40)}       │</div>
<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ 🛠️  SKILLS:                                            │</div>
<div class="output-line">│ ${profile.skills.join(', ').padEnd(45)}    │</div>
<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ Status: ${profile.status.padEnd(38)}      │</div>
<div class="output-line">│ ☕ Favorite: ${profile.coffee.padEnd(33)}      │</div>
<div class="output-line">│ 🎂 Birthday: ${profile.birthday.padEnd(33)}      │</div>
<div class="output-line">└────────────────────────────────────────────────────────┘</div>`;
}

// Command Execution
function executeCommand(cmdString) {
if (!cmdString.trim()) return;

// Check for aliases
if (state.aliases) {
    const parts = cmdString.split(' ');
    if (state.aliases[parts[0]]) {
        cmdString = state.aliases[parts[0]] + ' ' + parts.slice(1).join(' ');
    }
}

const [cmd, ...args] = cmdString.trim().split(' ');
const command = commands[cmd];

addOutput(`<div class="output-line"><span class="prompt">${state.currentUser}@terminalcorp:${state.currentDirectory}$</span> <span class="command-text">${cmdString}</span></div>`);

if (command) {
    const result = command.execute(args);
    if (result) addOutput(result);
    
    // Achievement check
    if (state.commandHistory.length === 50) {
        gainXP(50);
        addNotification('Achievement Unlocked!', 'Command Master - 50 commands executed! (+50 XP)');
    }
} else if (cmd) {
    addOutput(`<div class="output-line error">Command not found: ${cmd}</div>`);
    addOutput(`<div class="output-line">Type 'help' for available commands</div>`);
}

// Add to history
if (cmdString.trim()) {
    state.commandHistory.push(cmdString);
    state.historyIndex = state.commandHistory.length;
}
}

// UI Functions
function addOutput(html) {
const outputArea = document.getElementById('outputArea');
const div = document.createElement('div');
div.innerHTML = html;
outputArea.appendChild(div);

// Animate new lines
const newLines = div.querySelectorAll('.output-line');
newLines.forEach((line, index) => {
    line.style.opacity = '0';
    line.style.transform = 'translateX(-10px)';
    setTimeout(() => {
        line.style.opacity = '1';
        line.style.transform = 'translateX(0)';
    }, index * 30);
});

scrollToBottom();
}

function scrollToBottom() {
const outputArea = document.getElementById('outputArea');
setTimeout(() => {
    outputArea.scrollTop = outputArea.scrollHeight;
}, 100);
}

function updatePrompt() {
const promptEl = document.getElementById('prompt');
const dir = state.currentDirectory === '/home/guest' ? '~' : state.currentDirectory;
promptEl.textContent = `${state.currentUser}@terminalcorp:${dir};
}

function updateClock() {
const now = new Date();
document.getElementById('currentTime').textContent = now.toTimeString().slice(0, 8);
document.getElementById('currentDate').textContent = now.toISOString().slice(0, 10);
}

function generateCalendar() {
const calendar = document.getElementById('calendarGrid');
calendar.innerHTML = '';

const now = new Date();
const currentDate = now.getDate();
const firstDay = new Date(state.currentYear, state.currentMonth, 1).getDay();
const daysInMonth = new Date(state.currentYear, state.currentMonth + 1, 0).getDate();

// Days of week headers
const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
days.forEach(day => {
    const dayEl = document.createElement('div');
    dayEl.textContent = day;
    dayEl.style.fontWeight = 'bold';
    dayEl.style.color = 'var(--terminal-cyan)';
    calendar.appendChild(dayEl);
});

// Empty cells before first day
for (let i = 0; i < firstDay; i++) {
    calendar.appendChild(document.createElement('div'));
}

// Days of month
for (let day = 1; day <= daysInMonth; day++) {
    const dayEl = document.createElement('div');
    dayEl.textContent = day;
    dayEl.className = 'calendar-day';
    
    // Today
    if (day === currentDate && state.currentMonth === now.getMonth() && state.currentYear === now.getFullYear()) {
        dayEl.classList.add('today');
    }
    
    // Weekend
    const dayOfWeek = (firstDay + day - 1) % 7;
    if (dayOfWeek === 0 || dayOfWeek === 6) {
        dayEl.classList.add('weekend');
    }
    
    // Random events
    if ([5, 12, 15, 19, 25, 26].includes(day)) {
        dayEl.classList.add('has-event');
    }
    
    dayEl.onclick = () => {
        executeCommand(`calendar day ${day}`);
    };
    
    calendar.appendChild(dayEl);
}
}

function changeMonth(delta) {
state.currentMonth += delta;
if (state.currentMonth > 11) {
    state.currentMonth = 0;
    state.currentYear++;
} else if (state.currentMonth < 0) {
    state.currentMonth = 11;
    state.currentYear--;
}

const monthNames = ['JANUARY', 'FEBRUARY', 'MARCH', 'APRIL', 'MAY', 'JUNE',
                  'JULY', 'AUGUST', 'SEPTEMBER', 'OCTOBER', 'NOVEMBER', 'DECEMBER'];
document.getElementById('currentMonth').textContent = `${monthNames[state.currentMonth]} ${state.currentYear}`;
generateCalendar();
}

function toggleTask(checkbox) {
checkbox.classList.toggle('checked');

const taskItem = checkbox.parentElement;
const taskText = taskItem.querySelector('.task-text');
taskText.classList.toggle('completed');

updateTaskProgress();

if (checkbox.classList.contains('checked')) {
    gainXP(5);
}
}

function updateTaskProgress() {
const tasks = document.querySelectorAll('.task-checkbox');
const completed = document.querySelectorAll('.task-checkbox.checked').length;
const total = tasks.length;
const percentage = Math.round((completed / total) * 100);

document.getElementById('taskProgress').style.width = percentage + '%';
document.getElementById('sprintProgress').textContent = percentage + '%';
document.getElementById('tasksComplete').textContent = completed;
document.getElementById('tasksTotal').textContent = total;

// Update state
state.tasks.forEach((task, i) => {
    if (tasks[i]) {
        task.completed = tasks[i].classList.contains('checked');
    }
});
}

function updateTaskWidget() {
const taskList = document.getElementById('taskList');
taskList.innerHTML = '';

state.tasks.forEach(task => {
    const taskEl = document.createElement('div');
    taskEl.className = 'task-item';
    taskEl.innerHTML = `
        <div class="task-checkbox ${task.completed ? 'checked' : ''}" onclick="toggleTask(this)"></div>
        <span class="task-priority ${task.priority}">${task.priority.toUpperCase()}</span>
        <span class="task-text ${task.completed ? 'completed' : ''}">${task.text}</span>
        <span class="task-due">${task.due}</span>
    `;
    taskList.appendChild(taskEl);
});

updateTaskProgress();
}

function addNewTask() {
const taskText = prompt('Enter new task:');
if (taskText) {
    executeCommand(`tasks add ${taskText}`);
}
}

function refreshWidget(widget) {
const el = event.target.closest('.widget');
el.style.opacity = '0.5';

setTimeout(() => {
    el.style.opacity = '1';
    addNotification('Widget Refreshed', `${widget} data updated`);
    
    if (widget === 'calendar') generateCalendar();
    else if (widget === 'tasks') updateTaskWidget();
    else if (widget === 'status') updateSystemStatus();
}, 500);
}

function maximizeWidget(widget) {
addNotification('Feature Coming Soon', 'Widget maximization in development');
}

function switchTab(tabIndex) {
const tabs = document.querySelectorAll('.terminal-tab');
tabs.forEach((tab, i) => {
    tab.classList.toggle('active', i === tabIndex);
});

state.currentTab = tabIndex;

const outputArea = document.getElementById('outputArea');
if (tabIndex === 1) {
    outputArea.innerHTML = '<div class="output-line info">System logs:</div>';
    outputArea.innerHTML += '<div class="output-line">[10:22:31] INFO: User authentication successful</div>';
    outputArea.innerHTML += '<div class="output-line">[10:22:32] INFO: Terminal session started</div>';
    outputArea.innerHTML += '<div class="output-line">[10:22:35] DEBUG: Widget refresh triggered</div>';
} else if (tabIndex === 2) {
    outputArea.innerHTML = '<div class="output-line info">Network activity:</div>';
    outputArea.innerHTML += '<div class="output-line">→ api.terminalcorp.com (200 OK) 45ms</div>';
    outputArea.innerHTML += '<div class="output-line">→ auth.terminalcorp.com (200 OK) 23ms</div>';
    outputArea.innerHTML += '<div class="output-line">← websocket.terminalcorp.com (connected)</div>';
} else {
    location.reload(); // Reset to main tab
}
}

function updateSystemStatus() {
// Simulate changing metrics
state.systemHealth.cpu = Math.floor(Math.random() * 60) + 20;
state.systemHealth.memory = Math.floor(Math.random() * 40) + 40;
state.systemHealth.network = Math.floor(Math.random() * 50) + 50;

// Update server displays
const servers = document.querySelectorAll('.server-item');
servers.forEach(server => {
    const cpu = Math.floor(Math.random() * 80) + 10;
    const metricFill = server.querySelector('.metric-fill');
    metricFill.style.width = cpu + '%';
    
    if (cpu > 80) {
        metricFill.classList.add('high');
        server.querySelector('.server-status').className = 'server-status warning';
    } else {
        metricFill.classList.remove('high');
        server.querySelector('.server-status').className = 'server-status online';
    }
});

// Update network graph
updateNetworkGraph();
}

function updateNetworkGraph() {
const graph = document.getElementById('networkGraph');
graph.innerHTML = '';

for (let i = 0; i < 20; i++) {
    const bar = document.createElement('div');
    bar.className = 'activity-bar';
    const height = Math.random() * 100;
    bar.style.height = height + '%';
    
    if (Math.random() > 0.7) {
        bar.classList.add('active');
    }
    
    graph.appendChild(bar);
}
}

function gainXP(amount) {
state.userXP += amount;
const oldLevel = Math.floor((state.userXP - amount) / 100) + 1;
const newLevel = Math.floor(state.userXP / 100) + 1;

if (newLevel > oldLevel) {
    state.userLevel = newLevel;
    document.getElementById('userLevel').textContent = newLevel;
    addNotification('Level Up!', `You reached level ${newLevel}! 🎉`);
}
}

function addNotification(title, message) {
const container = document.getElementById('notificationContainer');
const notification = document.createElement('div');
notification.className = 'notification';
notification.innerHTML = `
    <div class="notification-title">${title}</div>
    <div class="notification-message">${message}</div>
    <div class="notification-close" onclick="this.parentElement.remove()">×</div>
`;

container.appendChild(notification);

setTimeout(() => {
    notification.style.opacity = '0';
    setTimeout(() => notification.remove(), 300);
}, 5000);
}

function enableMatrixMode() {
const matrixRain = document.getElementById('matrixRain');
matrixRain.innerHTML = '';
matrixRain.classList.add('active');

const chars = '01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン';

for (let i = 0; i < 80; i++) {
    const column = document.createElement('div');
    column.className = 'rain-column';
    column.style.left = (i * 1.25) + '%';
    column.style.animationDelay = Math.random() * 5 + 's';
    column.style.animationDuration = (10 + Math.random() * 20) + 's';
    
    let text = '';
    for (let j = 0; j < 50; j++) {
        const char = chars[Math.floor(Math.random() * chars.length)];
        text += `<span style="animation-delay: ${j * 0.1}s">${char}</span>`;
    }
    column.innerHTML = text;
    
    matrixRain.appendChild(column);
}
}

function disableMatrixMode() {
const matrixRain = document.getElementById('matrixRain');
matrixRain.classList.remove('active');
setTimeout(() => {
    matrixRain.innerHTML = '';
}, 500);
}

// Keyboard Handler
function handleKeyPress(e) {
const input = e.target;

switch(e.key) {
    case 'Enter':
        e.preventDefault();
        const cmd = input.value;
        executeCommand(cmd);
        input.value = '';
        break;
        
    case 'ArrowUp':
        e.preventDefault();
        if (state.historyIndex > 0) {
            state.historyIndex--;
            input.value = state.commandHistory[state.historyIndex];
        }
        break;
        
    case 'ArrowDown':
        e.preventDefault();
        if (state.historyIndex < state.commandHistory.length - 1) {
            state.historyIndex++;
            input.value = state.commandHistory[state.historyIndex];
        } else {
            state.historyIndex = state.commandHistory.length;
            input.value = '';
        }
        break;
        
    case 'Tab':
        e.preventDefault();
        autocomplete(input);
        break;
        
    case 'Escape':
        e.preventDefault();
        input.value = '';
        break;
}
}

// Autocomplete
function autocomplete(input) {
const value = input.value.toLowerCase();
const parts = value.split(' ');
const currentCmd = parts[0];

if (parts.length === 1) {
    // Complete command
    const cmdNames = Object.keys(commands);
    const matches = cmdNames.filter(cmd => cmd.startsWith(currentCmd));
    
    if (matches.length === 1) {
        input.value = matches[0] + ' ';
    } else if (matches.length > 1) {
        addOutput(`<div class="output-line info">Possible commands: ${matches.join(', ')}</div>`);
    }
} else {
    // Complete subcommands or files
    const cmd = commands[currentCmd];
    if (currentCmd === 'cd' || currentCmd === 'ls') {
        // Autocomplete directories
        const currentPath = state.currentDirectory === '~' ? '/home/guest' : state.currentDirectory;
        const dir = getDirectory(currentPath);
        
        if (dir && dir.children) {
            const prefix = parts[parts.length - 1];
            const matches = Object.keys(dir.children).filter(name => 
                name.startsWith(prefix) && dir.children[name].type === 'dir'
            );
            
            if (matches.length === 1) {
                parts[parts.length - 1] = matches[0];
                input.value = parts.join(' ') + '/';
            } else if (matches.length > 1) {
                addOutput(`<div class="output-line info">Possible directories: ${matches.join(', ')}</div>`);
            }
        }
    }
}
}

// Easter Eggs
let konamiCode = [];
const konamiPattern = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 
                  'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];

document.addEventListener('keydown', (e) => {
if (e.target.id !== 'commandInput                    let output = '<div class="output-line info">┌─ COMPANY NEWS FEED ────────────────────────────────────┐</div>';
        
        if (category === 'all' || category === 'urgent') {
            newsItems.urgent.forEach(item => {
                output += `<div class="output-line error">│ ${item}</div>`;
            });
        }
        
        if (category === 'all' || category === 'tech') {
            newsItems.tech.forEach(item => {
                output += `<div class="output-line">│ ${item}</div>`;
            });
        }
        
        if (category === 'all' || category === 'hr') {
            newsItems.hr.forEach(item => {
                output += `<div class="output-line">│ ${item}</div>`;
            });
        }
        
        if (category === 'all' || category === 'events') {
            newsItems.events.forEach(item => {
                output += `<div class="output-line">│ ${item}</div>`;
            });
        }
        
        output += '<div class="output-line">└────────────────────────────────────────────────────────┘</div>';
        output += '<div class="output-line info">Type "news [category]" to filter. Categories: tech, hr, events</div>';
        
        return output;
    }
},
who: {
    description: 'Employee directory and team information',
    usage: 'who [username|online|team|skills]',
    execute: (args) => {
        const query = args[0];
        
        if (query === 'online') {
            return `
<div class="output-line info">👥 ONLINE EMPLOYEES (23/45)</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">🟢 alice.dev      │ Senior Engineer   │ Building features  </div>
<div class="output-line">🟢 bob.design     │ UX Designer       │ Wireframing        </div>
<div class="output-line">🟡 carol.pm       │ Product Manager   │ In meeting         </div>
<div class="output-line">🔴 dave.qa        │ QA Engineer       │ Do not disturb     </div>
<div class="output-line">🟢 eve.support    │ Support Lead      │ Available          </div>
<div class="output-line">... and 18 more online</div>`;
        }
        
        else if (query === 'team') {
            return `
<div class="output-line info">🏢 TEAM STRUCTURE</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">Engineering (12)  │ Lead: sarah.cto   │ 🟢 10 online</div>
<div class="output-line">Design (6)        │ Lead: mike.ux     │ 🟢 5 online</div>
<div class="output-line">Product (4)       │ Lead: lisa.prod   │ 🟢 3 online</div>
<div class="output-line">QA (5)            │ Lead: raj.qa      │ 🟢 4 online</div>
<div class="output-line">Support (8)       │ Lead: kim.sup     │ 🟢 6 online</div>`;
        }
        
        else if (query === 'skills') {
            const skill = args[1] || 'javascript';
            return `
<div class="output-line info">🛠️ Employees with ${skill.toUpperCase()} skills:</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">alice.dev     │ Senior Engineer  │ Expert    │ 5 years</div>
<div class="output-line">bob.frontend  │ Frontend Dev     │ Advanced  │ 3 years</div>
<div class="output-line">carol.full    │ Full Stack       │ Expert    │ 7 years</div>
<div class="output-line">dave.junior   │ Junior Dev       │ Learning  │ 1 year</div>`;
        }
        
        else if (query) {
            // Specific user lookup
            return generateUserProfile(query);
        }
        
        // Default: show directory
        return `
<div class="output-line info">👥 EMPLOYEE DIRECTORY</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">Total Employees: 45 (23 online, 8 busy, 14 offline)</div>
<div class="output-line"></div>
<div class="output-line">Quick Commands:</div>
<div class="output-line">• who online    - Show online employees</div>
<div class="output-line">• who team      - Show team structure</div>
<div class="output-line">• who skills    - Find people by skill</div>
<div class="output-line">• who [user]    - View specific profile</div>`;
    }
},
rooms: {
    description: 'Meeting room management',
    usage: 'rooms [book|available|status|cancel]',
    execute: (args) => {
        const subcommand = args[0];
        
        if (subcommand === 'book') {
            const room = args[1] || 'Conf-A';
            const time = args[2] || '15:00';
            
            return `<div class="output-line success">✓ Room ${room} booked for ${time}</div>
<div class="output-line">Confirmation #: MTG-${Math.floor(Math.random() * 9999)}</div>
<div class="output-line info">Calendar invite sent to attendees</div>`;
        }
        
        else if (subcommand === 'available') {
            const time = args[1] || 'now';
            return `
<div class="output-line info">🚪 Available Rooms (${time}):</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">Conf-A    │ 12 seats │ 📽️ 📺 🖊️  │ Available now</div>
<div class="output-line">Dev-Room  │ 6 seats  │ 📺 🖊️     │ Available now</div>
<div class="output-line">Phone-1   │ 2 seats  │ 📞        │ Available now</div>
<div class="output-line">Phone-2   │ 2 seats  │ 📞        │ Available in 15min</div>`;
        }
        
        else if (subcommand === 'cancel') {
            const bookingId = args[1];
            if (!bookingId) {
                return '<div class="output-line error">Usage: rooms cancel [booking-id]</div>';
            }
            return `<div class="output-line success">✓ Booking ${bookingId} cancelled</div>
<div class="output-line">Room is now available for others</div>`;
        }
        
        // Default: show room status
        return generateRoomStatus();
    }
},
status: {
    description: 'System and service status',
    usage: 'status [servers|network|services|all]',
    execute: (args) => {
        const view = args[0] || 'all';
        
        let output = '<div class="output-line info">┌─ SYSTEM STATUS DASHBOARD ──────────────────────────────┐</div>';
        
        if (view === 'all' || view === 'servers') {
            output += `<div class="output-line">│ SERVERS:                                               │</div>
<div class="output-line">│ ██████████ WEB-01    │ 🟢 Online  │ CPU: 45% │ RAM: 3.2G │</div>
<div class="output-line">│ ██████████ API-01    │ 🟢 Online  │ CPU: 32% │ RAM: 2.1G │</div>
<div class="output-line">│ ████████░░ DB-01     │ 🟡 Warning │ CPU: 89% │ RAM: 7.8G │</div>
<div class="output-line">│ ██████████ CACHE-01  │ 🟢 Online  │ CPU: 12% │ RAM: 512M │</div>`;
        }
        
        if (view === 'all' || view === 'network') {
            output += `<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ NETWORK:                                               │</div>
<div class="output-line">│ Bandwidth: 82 Mb/s (45% capacity)                     │</div>
<div class="output-line">│ Latency: 12ms (excellent)                             │</div>
<div class="output-line">│ Packet Loss: 0.01%                                    │</div>`;
        }
        
        if (view === 'all' || view === 'services') {
            output += `<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ SERVICES:                                              │</div>
<div class="output-line">│ Auth Service    │ 🟢 Operational │ 235 req/s          │</div>
<div class="output-line">│ Email Gateway   │ 🟢 Operational │ 89 msg/min         │</div>
<div class="output-line">│ CI/CD Pipeline  │ 🟢 Operational │ 3 builds queued    │</div>
<div class="output-line">│ Monitoring      │ 🟢 Operational │ All checks passing │</div>`;
        }
        
        output += `<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ OVERALL: 🟢 Operational (99.7% uptime this month)      │</div>
<div class="output-line">└────────────────────────────────────────────────────────┘</div>`;
        
        return output;
    }
},
ls: {
    description: 'List directory contents',
    usage: 'ls [-la] [directory]',
    execute: (args) => {
        const showAll = args.includes('-la') || args.includes('-l') || args.includes('-a');
        const currentPath = state.currentDirectory === '~' ? '/home/guest' : state.currentDirectory;
        
        let output = '';
        const dir = getDirectory(currentPath);
        
        if (!dir) {
            return '<div class="output-line error">Directory not found</div>';
        }
        
        if (showAll) {
            output += '<div class="output-line">total 8</div>';
            output += '<div class="output-line">drwxr-xr-x  4 guest guest 4096 Mar 14 10:22 .</div>';
            output += '<div class="output-line">drwxr-xr-x  3 root  root  4096 Mar 14 09:00 ..</div>';
        }
        
        Object.entries(dir.children || {}).forEach(([name, item]) => {
            const icon = item.type === 'dir' ? '📁' : '📄';
            const color = item.type === 'dir' ? 'info' : '';
            
            if (showAll) {
                const perms = item.type === 'dir' ? 'drwxr-xr-x' : '-rw-r--r--';
                const size = item.type === 'dir' ? '4096' : Math.floor(Math.random() * 10000);
                output += `<div class="output-line ${color}">${perms}  1 guest guest ${size} Mar 14 10:22 ${icon} ${name}</div>`;
            } else {
                output += `<div class="output-line ${color}">${icon} ${name}</div>`;
            }
        });
        
        return output || '<div class="output-line">Directory is empty</div>';
    }
},
cd: {
    description: 'Change directory',
    usage: 'cd [directory]',
    execute: (args) => {
        const target = args[0] || '~';
        
        if (target === '~') {
            state.currentDirectory = '~';
            updatePrompt();
            return '';
        }
        
        if (target === '..') {
            const parts = state.currentDirectory.split('/').filter(p => p);
            parts.pop();
            state.currentDirectory = parts.length ? '/' + parts.join('/') : '/';
            updatePrompt();
            return '';
        }
        
        const newPath = target.startsWith('/') ? target : 
            state.currentDirectory === '/' ? '/' + target :
            state.currentDirectory + '/' + target;
        
        if (getDirectory(newPath)) {
            state.currentDirectory = newPath;
            updatePrompt();
            return '';
        }
        
        return `<div class="output-line error">cd: ${target}: No such directory</div>`;
    }
},
cat: {
    description: 'Display file contents',
    usage: 'cat [file]',
    execute: (args) => {
        const filename = args[0];
        if (!filename) {
            return '<div class="output-line error">Usage: cat [filename]</div>';
        }
        
        const currentPath = state.currentDirectory === '~' ? '/home/guest' : state.currentDirectory;
        const file = getFile(currentPath + '/' + filename);
        
        if (file && file.content) {
            return `<div class="output-line">${file.content.replace(/\n/g, '</div><div class="output-line">')}</div>`;
        }
        
        return `<div class="output-line error">cat: ${filename}: No such file</div>`;
    }
},
find: {
    description: 'Search for files and content',
    usage: 'find [pattern] [-name|-content]',
    execute: (args) => {
        const pattern = args[0];
        if (!pattern) {
            return '<div class="output-line error">Usage: find [pattern]</div>';
        }
        
        const results = [];
        searchFiles('/', pattern, results);
        
        if (results.length === 0) {
            return `<div class="output-line">No files found matching "${pattern}"</div>`;
        }
        
        let output = `<div class="output-line info">Found ${results.length} matches:</div>`;
        results.forEach(result => {
            output += `<div class="output-line">${result}</div>`;
        });
        
        return output;
    }
},
whoami: {
    description: 'Display current user',
    usage: 'whoami',
    execute: () => `<div class="output-line">${state.currentUser}</div>`
},
theme: {
    description: 'Change terminal theme',
    usage: 'theme [green|amber|cyan|matrix|custom]',
    execute: (args) => {
        const themes = {
            green: { 
                primary: '#33ff33', 
                dim: '#00cc00',
                bg: '#0a0a0a',
                desc: 'Classic Terminal'
            },
            amber: { 
                primary: '#ffb000', 
                dim: '#cc8800',
                bg: '#0a0a0a',
                desc: 'Retro Amber'
            },
            cyan: { 
                primary: '#00ffff', 
                dim: '#00cccc',
                bg: '#000a0a',
                desc: 'Cyberpunk Blue'
            },
            matrix: { 
                primary: '#00ff00', 
                dim: '#008800',
                bg: '#000000',
                desc: 'Matrix Rain'
            },
            custom: {
                primary: '#ff33ff',
                dim: '#cc00cc',
                bg: '#0a000a',
                desc: 'Custom Purple'
            }
        };
        
        const themeName = args[0];
        if (!themeName) {
            let output = '<div class="output-line info">Available themes:</div>';
            Object.entries(themes).forEach(([name, theme]) => {
                const active = state.theme === name ? ' (active)' : '';
                output += `<div class="output-line">• ${name} - ${theme.desc}${active}</div>`;
            });
            return output;
        }
        
        if (themes[themeName]) {
            const theme = themes[themeName];
            document.documentElement.style.setProperty('--terminal-green', theme.primary);
            document.documentElement.style.setProperty('--terminal-dim', theme.dim);
            document.documentElement.style.setProperty('--terminal-bg', theme.bg);
            state.theme = themeName;
            
            if (themeName === 'matrix') {
                enableMatrixMode();
            } else {
                disableMatrixMode();
            }
            
            return `<div class="output-line success">✓ Theme changed to ${themeName} - ${theme.desc}</div>`;
        }
        
        return '<div class="output-line error">Invalid theme. Use: theme [green|amber|cyan|matrix|custom]</div>';
    }
},
matrix: {
    description: 'Toggle matrix mode',
    usage: 'matrix',
    execute: () => {
        state.matrixMode = !state.matrixMode;
        
        if (state.matrixMode) {
            enableMatrixMode();
            gainXP(20);
            return '<div class="output-line success">🟢 MATRIX MODE ACTIVATED (+20 XP)</div><div class="output-line system">Reality is an illusion...</div>';
        } else {
            disableMatrixMode();
            return '<div class="output-line">Matrix mode deactivated</div>';
        }
    }
},
timer: {
    description: 'Pomodoro timer',
    usage: 'timer [minutes] [break]',
    execute: (args) => {
        const minutes = parseInt(args[0]) || 25;
        const breakMin = parseInt(args[1]) || 5;
        
        addNotification('Timer Started', `${minutes} minute focus session started`);
        
        setTimeout(() => {
            addNotification('Timer Complete', `Time for a ${breakMin} minute break!`);
            gainXP(15);
        }, minutes * 60 * 1000);
        
        return `<div class="output-line success">⏲️ Timer started: ${minutes} minutes</div>
<div class="output-line">Break scheduled: ${breakMin} minutes</div>
<div class="output-line info">Stay focused! You'll earn +15 XP on completion</div>`;
    }
},
notes: {
    description: 'Quick note taking',
    usage: 'notes [add|list|clear]',
    execute: (args) => {
        const subcommand = args[0];
        
        if (!state.notes) state.notes = [];
        
        if (subcommand === 'add') {
            const note = args.slice(1).join(' ');
            if (!note) {
                return '<div class="output-line error">Usage: notes add [your note]</div>';
            }
            state.notes.push({
                text: note,
                timestamp: new Date().toLocaleTimeString()
            });
            return '<div class="output-line success">✓ Note saved</div>';
        }
        
        else if (subcommand === 'list') {
            if (state.notes.length === 0) {
                return '<div class="output-line">No notes saved</div>';
            }
            let output = '<div class="output-line info">📝 Your Notes:</div>';
            state.notes.forEach((note, i) => {
                output += `<div class="output-line">${i + 1}. [${note.timestamp}] ${note.text}</div>`;
            });
            return output;
        }
        
        else if (subcommand === 'clear') {
            state.notes = [];
            return '<div class="output-line success">✓ All notes cleared</div>';
        }
        
        return '<div class="output-line">Usage: notes [add|list|clear]</div>';
    }
},
alias: {
    description: 'Create command shortcuts',
    usage: 'alias [name]=[command]',
    execute: (args) => {
        if (!state.aliases) state.aliases = {};
        
        if (args.length === 0) {
            let output = '<div class="output-line info">Current aliases:</div>';
            Object.entries(state.aliases).forEach(([alias, cmd]) => {
                output += `<div class="output-line">${alias} = "${cmd}"</div>`;
            });
            return output || '<div class="output-line">No aliases defined</div>';
        }
        
        const aliasStr = args.join(' ');
        const [name, ...cmdParts] = aliasStr.split('=');
        const command = cmdParts.join('=');
        
        if (!command) {
            return '<div class="output-line error">Usage: alias name=command</div>';
        }
        
        state.aliases[name] = command;
        return `<div class="output-line success">✓ Alias created: ${name} = "${command}"</div>`;
    }
},
profile: {
    description: 'View user profile and stats',
    usage: 'profile',
    execute: () => {
        const level = Math.floor(state.userXP / 100) + 1;
        const xpInLevel = state.userXP % 100;
        const xpNeeded = 100 - xpInLevel;
        
        return `
<div class="output-line info">╔═══════════════════════════════════════════════════════╗</div>
<div class="output-line info">║                  USER PROFILE                         ║</div>
<div class="output-line info">╚═══════════════════════════════════════════════════════╝</div>
<div class="output-line">Username: ${state.currentUser}</div>
<div class="output-line">Level: ${level} (${xpInLevel}/100 XP)</div>
<div class="output-line">${generateProgressBar(xpInLevel)}</div>
<div class="output-line">Next level in: ${xpNeeded} XP</div>
<div class="output-line"></div>
<div class="output-line">🏆 Achievements:</div>
<div class="output-line">• First Login</div>
<div class="output-line">• Command Master (50+ commands)</div>
<div class="output-line">• Coffee Addict (25+ coffees)</div>
<div class="output-line"></div>
<div class="output-line">📊 Statistics:</div>
<div class="output-line">• Commands executed: ${state.commandHistory.length}</div>
<div class="output-line">• Tasks completed: ${state.tasks.filter(t => t.completed).length}</div>
<div class="output-line">• Active theme: ${state.theme}</div>`;
    }
},
config: {
    description: 'System configuration',
    usage: 'config [get|set] [key] [value]',
    execute: (args) => {
        const subcommand = args[0];
        
        if (subcommand === 'get') {
            const key = args[1];
            if (!key) {
                return '<div class="output-line error">Usage: config get [key]</div>';
            }
            return `<div class="output-line">${key} = ${state[key] || 'undefined'}</div>`;
        }
        
        else if (subcommand === 'set') {
            const key = args[1];
            const value = args.slice(2).join(' ');
            if (!key || !value) {
                return '<div class="output-line error">Usage: config set [key] [value]</div>';
            }
            state[key] = value;
            return `<div class="output-line success">✓ ${key} = ${value}</div>`;
        }
        
        return '<div class="output-line">Usage: config [get|set] [key] [value]</div>';
    }
},
tutorial: {
    description: 'Interactive tutorial',
    usage: 'tutorial',
    execute: () => {
        return `
<div class="output-line info">🎓 INTERACTIVE TUTORIAL</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">Welcome to TerminalCorp! Let's learn the basics:</div>
<div class="output-line"></div>
<div class="output-line success">1. NAVIGATION</div>
<div class="output-line">   Try: ls (list files), cd projects (change directory)</div>
<div class="output-line"></div>
<div class="output-line success">2. PRODUCTIVITY</div>
<div class="output-line">   Try: tasks (view tasks), calendar (check schedule)</div>
<div class="output-line"></div>
<div class="output-line success">3. COMMUNICATION</div>
<div class="output-line">   Try: chat #general, who online</div>
<div class="output-line"></div>
<div class="output-line success">4. CUSTOMIZATION</div>
<div class="output-line">   Try: theme amber, alias ll=ls -la</div>
<div class="output-line"></div>
<div class="output-line info">💡 Pro tip: Use TAB for command completion!</div>`;
    }
},
snake: {
    description: 'Play snake game',
    usage: 'snake',
    execute: () => {
        return `<div class="output-line info">🐍 SNAKE GAME</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">Coming soon! This feature is under development.</div>
<div class="output-line">For now, try the 'matrix' command for some fun!</div>`;
    }
},
about: {
    description: 'About TerminalCorp',
    usage: 'about',
    execute: () => {
        return `
<div class="output-line info">╔═══════════════════════════════════════════════════════╗</div>
<div class="output-line info">║           TERMINALCORP INTRANET v2.0                  ║</div>
<div class="output-line info">║                                                       ║</div>
<div class="output-line info">║   Where productivity meets the command line           ║</div>
<div class="output-line info">║                                                       ║</div>
<div class="output-line info">║   Created with ❤️ using pure HTML, CSS & JavaScript   ║</div>
<div class="output-line info">║   No frameworks, just web standards                   ║</div>
<div class="output-line info">║                                                       ║</div>
<div class="output-line info">║   Features:                                           ║</div>
<div class="output-line info">║   • Full command line interface                       ║</div>
<div class="output-line info">║   • Real-time widgets & notifications                 ║</div>
<div class="output-line info">║   • File system navigation                            ║</div>
<div class="output-line info">║   • Team collaboration tools                          ║</div>
<div class="output-line info">║   • Gamification & achievements                       ║</div>
<div class="output-line info">║   • Multiple themes & customization                   ║</div>
<div class="output-line info">║                                                       ║</div>
<div class="output-line info">║   © 2025 TerminalCorp - The Future of Work           ║</div>
<div class="output-line info">╚═══════════════════════════════════════════════════════╝</div>`;
    }
}
};

// Helper Functions
function getDirectory(path) {
if (path === '~') path = '/home/guest';
const parts = path.split('/').filter(p => p);
let current = state.fileSystem['/'];

for (const part of parts) {
    if (                                <div class="activity-graph" id="networkGraph">
                        <!-- Activity bars will be generated by JS -->
                    </div>
                    <span>82 Mb/s</span>
                </div>
            </div>

            <!-- Weather Widget -->
            <div class="widget">
                <div class="widget-header">
                    <div>
                        <span class="widget-icon">🌤️</span>
                        <span>ENVIRONMENT</span>
                    </div>
                    <div class="widget-actions">
                        <div class="widget-action" onclick="refreshWidget('weather')" title="Refresh">↻</div>
                    </div>
                </div>
                <div class="weather-main">
                    <div class="weather-icon" id="weatherIcon">☀️</div>
                    <div class="weather-details">
                        <div class="temperature">22°C</div>
                        <div class="weather-desc">Partly Cloudy</div>
                    </div>
                </div>
                <div class="weather-stats">
                    <div class="weather-stat">
                        <div class="weather-label">Office</div>
                        <div class="weather-value">21°C</div>
                    </div>
                    <div class="weather-stat">
                        <div class="weather-label">Humidity</div>
                        <div class="weather-value">45%</div>
                    </div>
                    <div class="weather-stat">
                        <div class="weather-label">Air Quality</div>
                        <div class="weather-value">Good</div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="widget">
                <div class="widget-header">
                    <div>
                        <span class="widget-icon">⚙️</span>
                        <span>QUICK ACCESS</span>
                    </div>
                </div>
                <div class="quick-actions">
                    <div class="action-btn" onclick="executeCommand('calendar')">
                        <span class="action-icon">📅</span>
                        Calendar
                    </div>
                    <div class="action-btn" onclick="executeCommand('chat')">
                        <span class="action-icon">💬</span>
                        Chat
                    </div>
                    <div class="action-btn" onclick="executeCommand('coffee')">
                        <span class="action-icon">☕</span>
                        Coffee
                    </div>
                    <div class="action-btn" onclick="executeCommand('news')">
                        <span class="action-icon">📰</span>
                        News
                    </div>
                    <div class="action-btn" onclick="executeCommand('rooms')">
                        <span class="action-icon">🚪</span>
                        Rooms
                    </div>
                    <div class="action-btn" onclick="executeCommand('who')">
                        <span class="action-icon">👥</span>
                        Directory
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div>

<!-- Notification Container -->
<div class="notification-container" id="notificationContainer"></div>

<!-- Secret Mode Indicator -->
<div class="secret-mode" id="secretMode">🔓 SECRET MODE ACTIVATED</div>

<script>
// Global State Management
const state = {
commandHistory: [],
historyIndex: -1,
currentUser: 'guest',
currentDirectory: '~',
userLevel: 1,
userXP: 0,
currentTab: 0,
currentMonth: new Date().getMonth(),
currentYear: new Date().getFullYear(),
notifications: [],
fileSystem: {
    '/': {
        type: 'dir',
        children: {
            'home': { 
                type: 'dir',
                children: {
                    'guest': {
                        type: 'dir',
                        children: {
                            'readme.md': { 
                                type: 'file', 
                                content: '# Welcome to TerminalCorp\n\n## Getting Started\n- Type `help` to see commands\n- Use arrow keys for history\n- Tab for autocompletion\n\nHappy hacking!' 
                            },
                            'notes.txt': { 
                                type: 'file', 
                                content: 'Personal notes:\n- Remember to update documentation\n- Coffee machine code: 4729\n- Secret command: matrix' 
                            }
                        }
                    }
                }
            },
            'projects': { 
                type: 'dir',
                children: {
                    'mobile-app': { 
                        type: 'dir',
                        children: {
                            'README.md': { type: 'file', content: '# Mobile App Project\nReact Native implementation' },
                            'package.json': { type: 'file', content: '{\n  "name": "terminalcorp-mobile",\n  "version": "2.0.0"\n}' }
                        }
                    },
                    'website-redesign': { 
                        type: 'dir',
                        children: {
                            'index.html': { type: 'file', content: '<!DOCTYPE html>\n<html>\n<!-- New design -->\n</html>' }
                        }
                    },
                    'api-v2': { 
                        type: 'dir',
                        children: {
                            'server.js': { type: 'file', content: '// Express server v2\nconst express = require("express");' }
                        }
                    }
                }
            },
            'team': {
                type: 'dir',
                children: {
                    'members.json': { 
                        type: 'file', 
                        content: JSON.stringify([
                            { name: 'Alice Chen', role: 'Senior Engineer', skills: ['JS', 'Python'] },
                            { name: 'Bob Smith', role: 'UX Designer', skills: ['Figma', 'CSS'] },
                            { name: 'Carol Johnson', role: 'Product Manager', skills: ['Agile', 'Jira'] }
                        ], null, 2)
                    }
                }
            }
        }
    }
},
theme: 'green',
matrixMode: false,
achievements: [],
systemHealth: {
    cpu: 45,
    memory: 65,
    network: 82,
    uptime: 99.7
},
tasks: [
    { id: 1, text: 'Fix authentication bug', priority: 'high', completed: false, due: 'TODAY' },
    { id: 2, text: 'Deploy hotfix to production', priority: 'high', completed: false, due: 'TODAY' },
    { id: 3, text: 'Update API documentation', priority: 'medium', completed: false, due: 'MAR 16' },
    { id: 4, text: 'Refactor helper functions', priority: 'low', completed: true, due: 'MAR 20' }
]
};

// Enhanced Command Registry
const commands = {
help: {
    description: 'Show available commands',
    usage: 'help [command]',
    execute: (args) => {
        if (args[0] && commands[args[0]]) {
            const cmd = commands[args[0]];
            return `
<div class="output-line info">Command: ${args[0]}</div>
<div class="output-line">Description: ${cmd.description}</div>
<div class="output-line">Usage: ${cmd.usage || args[0]}</div>`;
        }
        return `
<div class="help-grid">
<div class="help-category">
<div class="help-category-title">📋 Productivity</div>
<div class="help-commands">
<div class="help-command"><span class="help-command-name">calendar</span><span class="help-command-desc">Manage events & schedule</span></div>
<div class="help-command"><span class="help-command-name">tasks</span><span class="help-command-desc">Task management system</span></div>
<div class="help-command"><span class="help-command-name">chat</span><span class="help-command-desc">Team communication</span></div>
<div class="help-command"><span class="help-command-name">notes</span><span class="help-command-desc">Quick note taking</span></div>
<div class="help-command"><span class="help-command-name">timer</span><span class="help-command-desc">Pomodoro timer</span></div>
</div>
</div>
<div class="help-category">
<div class="help-category-title">🏢 Office</div>
<div class="help-commands">
<div class="help-command"><span class="help-command-name">coffee</span><span class="help-command-desc">Coffee machine status</span></div>
<div class="help-command"><span class="help-command-name">rooms</span><span class="help-command-desc">Meeting room booking</span></div>
<div class="help-command"><span class="help-command-name">who</span><span class="help-command-desc">Employee directory</span></div>
<div class="help-command"><span class="help-command-name">weather</span><span class="help-command-desc">Weather & environment</span></div>
<div class="help-command"><span class="help-command-name">news</span><span class="help-command-desc">Company announcements</span></div>
</div>
</div>
<div class="help-category">
<div class="help-category-title">💻 System</div>
<div class="help-commands">
<div class="help-command"><span class="help-command-name">status</span><span class="help-command-desc">System health monitor</span></div>
<div class="help-command"><span class="help-command-name">ls</span><span class="help-command-desc">List directory contents</span></div>
<div class="help-command"><span class="help-command-name">cd</span><span class="help-command-desc">Change directory</span></div>
<div class="help-command"><span class="help-command-name">cat</span><span class="help-command-desc">Display file contents</span></div>
<div class="help-command"><span class="help-command-name">find</span><span class="help-command-desc">Search files & content</span></div>
<div class="help-command"><span class="help-command-name">clear</span><span class="help-command-desc">Clear terminal screen</span></div>
</div>
</div>
<div class="help-category">
<div class="help-category-title">🎨 Customization</div>
<div class="help-commands">
<div class="help-command"><span class="help-command-name">theme</span><span class="help-command-desc">Change color scheme</span></div>
<div class="help-command"><span class="help-command-name">alias</span><span class="help-command-desc">Create command shortcuts</span></div>
<div class="help-command"><span class="help-command-name">config</span><span class="help-command-desc">System configuration</span></div>
<div class="help-command"><span class="help-command-name">profile</span><span class="help-command-desc">User profile settings</span></div>
</div>
</div>
</div>
<div class="output-line info">Type 'help [command]' for detailed information about a specific command</div>`;
    }
},
clear: {
    description: 'Clear terminal screen',
    usage: 'clear',
    execute: () => {
        document.getElementById('outputArea').innerHTML = '';
        return '';
    }
},
calendar: {
    description: 'Calendar and event management',
    usage: 'calendar [add|week|month|search]',
    execute: (args) => {
        const subcommand = args[0];
        
        if (subcommand === 'add') {
            const eventText = args.slice(1).join(' ');
            if (!eventText) {
                return '<div class="output-line error">Usage: calendar add "Event name" HH:MM</div>';
            }
            addNotification('Calendar', `Event "${eventText}" added successfully`);
            return '<div class="output-line success">✓ Event added to calendar</div>';
        } 
        
        else if (subcommand === 'week') {
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'];
            const events = [
                ['09:00 Standup', '14:00 Sprint'],
                ['10:00 Client Call', '15:00 Review'],
                ['09:00 Standup', 'Free Day'],
                ['11:00 Design Review', '16:00 1:1'],
                ['09:00 Standup', '14:00 Retro']
            ];
            
            let output = '<div class="output-line info">┌─ WEEKLY VIEW ─────────────────────────────────────────┐</div>';
            days.forEach((day, i) => {
                output += `<div class="output-line">│ ${day} ${14 + i} │ ${events[i][0].padEnd(20)} │ ${events[i][1].padEnd(17)} │</div>`;
            });
            output += '<div class="output-line">└───────────────────────────────────────────────────────┘</div>';
            return output;
        }
        
        else if (subcommand === 'month') {
            return generateMonthView();
        }
        
        else if (subcommand === 'search') {
            const query = args.slice(1).join(' ');
            return `<div class="output-line info">Searching for "${query}"...</div>
<div class="output-line">Found 3 events matching your search:</div>
<div class="output-line">• Mar 15 09:00 - Team ${query} Meeting</div>
<div class="output-line">• Mar 18 14:00 - ${query} Review Session</div>
<div class="output-line">• Mar 22 11:00 - ${query} Planning</div>`;
        }
        
        // Default: show today's schedule
        return `
<div class="output-line info">┌─ TODAY'S SCHEDULE ─────────────────────────────────────┐</div>
<div class="output-line">│ 09:00-10:00 │ Team Standup      │ Room: Dev-A      │ 🟢 │</div>
<div class="output-line">│ 11:30-12:30 │ Client Meeting    │ Room: Conf-1     │ 🟡 │</div>
<div class="output-line">│ 14:00-15:00 │ Sprint Planning   │ Room: Virtual    │ ⏰ │</div>
<div class="output-line">│ 16:30-17:00 │ 1:1 with Manager  │ Room: Office-B   │ ⏰ │</div>
<div class="output-line">└────────────────────────────────────────────────────────┘</div>
<div class="output-line success">You have 4 meetings today. Next: Client Meeting in 2h 15m</div>`;
    }
},
tasks: {
    description: 'Task management system',
    usage: 'tasks [add|complete|priority|stats]',
    execute: (args) => {
        const subcommand = args[0];
        
        if (subcommand === 'add') {
            const taskText = args.slice(1).join(' ');
            if (!taskText) {
                return '<div class="output-line error">Usage: tasks add [priority] "task description"</div>';
            }
            const newTask = {
                id: state.tasks.length + 1,
                text: taskText,
                priority: 'medium',
                completed: false,
                due: 'MAR 20'
            };
            state.tasks.push(newTask);
            updateTaskWidget();
            return '<div class="output-line success">✓ Task added successfully</div>';
        }
        
        else if (subcommand === 'complete') {
            const taskId = parseInt(args[1]);
            const task = state.tasks.find(t => t.id === taskId);
            if (task) {
                task.completed = true;
                updateTaskWidget();
                gainXP(10);
                return `<div class="output-line success">✓ Task #${taskId} marked as complete (+10 XP)</div>`;
            }
            return '<div class="output-line error">Task not found</div>';
        }
        
        else if (subcommand === 'priority') {
            const priorities = ['high', 'medium', 'low'];
            let output = '<div class="output-line info">Tasks by Priority:</div>';
            priorities.forEach(priority => {
                const tasks = state.tasks.filter(t => t.priority === priority && !t.completed);
                output += `<div class="output-line">${priority.toUpperCase()}: ${tasks.length} tasks</div>`;
                tasks.forEach(task => {
                    output += `<div class="output-line">  #${task.id} - ${task.text}</div>`;
                });
            });
            return output;
        }
        
        else if (subcommand === 'stats') {
            const total = state.tasks.length;
            const completed = state.tasks.filter(t => t.completed).length;
            const percentage = Math.round((completed / total) * 100);
            
            return `
<div class="output-line info">📊 Task Statistics</div>
<div class="output-line">Total Tasks: ${total}</div>
<div class="output-line">Completed: ${completed}</div>
<div class="output-line">Remaining: ${total - completed}</div>
<div class="output-line">Completion Rate: ${percentage}%</div>
<div class="output-line">${generateProgressBar(percentage)}</div>`;
        }
        
        // Default: list all tasks
        return generateTaskTable();
    }
},
chat: {
    description: 'Team communication system',
    usage: 'chat [#channel|@user|status|history]',
    execute: (args) => {
        const target = args[0];
        
        if (target && target.startsWith('@')) {
            const message = args.slice(1).join(' ');
            return `<div class="output-line success">✓ Message sent to ${target}: "${message}"</div>`;
        } 
        
        else if (target && target.startsWith('#')) {
            return `
<div class="output-line info">Joined ${target}</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line"><span class="help-command-name">[14:32] alice.dev:</span> Has anyone seen the latest build errors?</div>
<div class="output-line"><span class="help-command-name">[14:33] bob.qa:</span> Yes, looking into it now. Seems like a dependency issue</div>
<div class="output-line"><span class="help-command-name">[14:33] alice.dev:</span> Thanks! Let me know if you need help debugging</div>
<div class="output-line"><span class="help-command-name">[14:34] carol.pm:</span> Keep me posted on the fix timeline please 🙏</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>`;
        }
        
        else if (target === 'status') {
            const statuses = ['online', 'busy', 'away', 'offline'];
            const currentStatus = statuses[Math.floor(Math.random() * 3)];
            return `<div class="output-line info">Your status: 🟢 ${currentStatus}</div>
<div class="output-line">To change: chat status [online|busy|away|offline]</div>`;
        }
        
        else if (target === 'history') {
            return `<div class="output-line info">Recent conversations:</div>
<div class="output-line">• @alice.dev - "Fixed the login bug" (10 min ago)</div>
<div class="output-line">• #engineering - 47 new messages</div>
<div class="output-line">• @bob.qa - "Tests passing now" (1 hour ago)</div>
<div class="output-line">• #random - 12 new messages</div>`;
        }
        
        // Default channel view
        return generateChatView();
    }
},
weather: {
    description: 'Weather and office environment',
    usage: 'weather [forecast|office|commute]',
    execute: (args) => {
        const subcommand = args[0];
        
        if (subcommand === 'forecast') {
            return `
<div class="output-line info">┌─ 5-DAY FORECAST ───────────────────────────────────────┐</div>
<div class="output-line">│ Today    ☀️  22°C │ Clear skies, perfect weather       │</div>
<div class="output-line">│ Tomorrow ⛅ 20°C │ Partly cloudy, mild winds          │</div>
<div class="output-line">│ Wed      🌧️  18°C │ Rain expected, bring umbrella      │</div>
<div class="output-line">│ Thu      ⛅ 19°C │ Cloudy with sunny intervals        │</div>
<div class="output-line">│ Fri      ☀️  24°C │ Sunny and warm, great for lunch    │</div>
<div class="output-line">└────────────────────────────────────────────────────────┘</div>`;
        }
        
        else if (subcommand === 'office') {
            return `
<div class="output-line info">🏢 Office Environment Status</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">Zone         │ Temp  │ Humidity │ Air Quality │ Occupancy</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">Dev Floor    │ 22°C  │ 45%      │ Excellent   │ 78%</div>
<div class="output-line">Meeting Rooms│ 20°C  │ 42%      │ Good        │ 45%</div>
<div class="output-line">Cafeteria    │ 23°C  │ 48%      │ Good        │ 62%</div>
<div class="output-line">Server Room  │ 18°C  │ 35%      │ Excellent   │ N/A</div>`;
        }
        
        else if (subcommand === 'commute') {
            return `
<div class="output-line info">🚗 Commute Conditions</div>
<div class="output-line">Highway 101: Moderate traffic, 35 min to office</div>
<div class="output-line">Public Transit: On schedule, next train in 12 min</div>
<div class="output-line">Bike Route: Clear and safe, 20 min estimated</div>
<div class="output-line warning">⚠ Construction on 3rd Street - expect delays</div>`;
        }
        
        // Default weather view
        return `
<div class="output-line info">┌─ WEATHER & ENVIRONMENT ────────────────────────────────┐</div>
<div class="output-line">│ OUTSIDE:    ☀️  22°C │ Clear skies, light breeze         │</div>
<div class="output-line">│ OFFICE:     🏢  21°C │ Humidity: 45% │ Air: Excellent   │</div>
<div class="output-line">│ COMMUTE:    🚗  Good │ 25 min via Highway 101            │</div>
<div class="output-line">├────────────────────────────────────────────────────────┤</div>
<div class="output-line">│ UV INDEX: 6 (High) - Sunscreen recommended            │</div>
<div class="output-line">│ POLLEN: Low - Good day for outdoor activities         │</div>
<div class="output-line">└────────────────────────────────────────────────────────┘</div>`;
    }
},
coffee: {
    description: 'Coffee machine status and ordering',
    usage: 'coffee [order|status|stats|leaderboard]',
    execute: (args) => {
        const subcommand = args[0];
        
        if (subcommand === 'order') {
            const drink = args.slice(1).join(' ') || 'Cappuccino';
            const queuePosition = Math.floor(Math.random() * 5) + 1;
            const eta = queuePosition * 3;
            
            addNotification('Coffee Order', `Your ${drink} is being prepared!`);
            gainXP(5);
            
            return `<div class="output-line success">☕ Order placed: ${drink}</div>
<div class="output-line">Queue position: #${queuePosition}</div>
<div class="output-line">Estimated time: ${eta} minutes</div>
<div class="output-line info">You'll be notified when ready! (+5 XP)</div>`;
        }
        
        else if (subcommand === 'stats') {
            return `
<div class="output-line info">☕ Your Coffee Statistics</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">Today: 2 cups (Cappuccino, Americano)</div>
<div class="output-line">This Week: 8 cups</div>
<div class="output-line">This Month: 47 cups</div>
<div class="output-line">Favorite: Cappuccino (62%)</div>
<div class="output-line">Total Caffeine: ~3,760mg ⚡</div>
<div class="output-line warning">Health tip: Consider switching to decaf occasionally!</div>`;
        }
        
        else if (subcommand === 'leaderboard') {
            return `
<div class="output-line info">🏆 Coffee Consumption Leaderboard - March 2025</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>
<div class="output-line">1. 🥇 carol.pm       │ 127 cups │ ████████████████████ │</div>
<div class="output-line">2. 🥈 dave.backend   │ 98 cups  │ ███████████████░░░░░ │</div>
<div class="output-line">3. 🥉 alice.dev      │ 89 cups  │ ██████████████░░░░░░ │</div>
<div class="output-line">4.    bob.design     │ 67 cups  │ ██████████░░░░░░░░░░ │</div>
<div class="output-line">5.    YOU            │ 47 cups  │ ███████░░░░░░░░░░░░░ │</div>
<div class="output-line">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</div>`;
        }
        
        // Default status view
        return generateCoffeeStatus();
    }
},
news: {
    description: 'Company news and announcements',
    usage: 'news [tech|hr|events|all]',
    execute: (args) => {
        const category = args[0] || 'all';
        const newsItems = {
            urgent: [
                '🔴 URGENT: System maintenance tonight 23:00-01:00',
                '🔴 CRITICAL: Security patch deployment required'
            ],
            tech: [
                '💻 Docker registry updated to v2.8.1',
                '💻 New CI/CD pipeline improvements deployed',
                '💻 React 18 migration guide now available'
            ],
            hr: [
                '👥 Q1 performance reviews open until Mar 31',
                '👥 New health benefits enrollment starts Apr 1',
                '👥 Remote work policy updates effective immediately'
            ],
            events: [
                '📅 Q1 All-hands meeting scheduled for Mar 25',
                '📅 Tech Talk: "AI in Production" this Friday 3pm',
                '📅 Team Building: Escape Room next Thursday'
            ]
        };
        
        let output = '<div class="output-line info">┌─    </style>
</head>
<body>
<!-- Boot Sequence -->
<div class="boot-sequence" id="bootSequence">
<div class="boot-logo">
<pre class="ascii-logo">
╔══════════════════════════════════════════════════════════╗
║  _____ _____ ____  __  __ ___ _   _    _    _           ║
║ |_   _| ____|  _ \|  \/  |_ _| \ | |  / \  | |          ║
║   | | |  _| | |_) | |\/| || ||  \| | / _ \ | |          ║
║   | | | |___|  _ <| |  | || || |\  |/ ___ \| |___       ║
║   |_| |_____|_| \_\_|  |_|___|_| \_/_/   \_\_____|      ║
║                                                          ║
║              C O R P   I N T R A N E T                   ║
╚══════════════════════════════════════════════════════════╝
</pre>
</div>
<div class="boot-text" style="animation-delay: 0s">TERMINALCORP BIOS v4.2.0</div>
<div class="boot-text" style="animation-delay: 0.2s">CPU: Intel Core i9-13900K @ 5.8GHz</div>
<div class="boot-text" style="animation-delay: 0.4s">Memory Test: 64GB OK</div>
<div class="boot-text" style="animation-delay: 0.6s">Initializing quantum encryption...</div>
<div class="boot-text" style="animation-delay: 0.8s">Loading AI subsystems...</div>
<div class="boot-text" style="animation-delay: 1s">Connecting to satellite network...</div>
<div class="boot-text" style="animation-delay: 1.2s">Starting terminal services...</div>
<div class="boot-progress">
<div class="boot-progress-bar"></div>
</div>
</div>

<!-- Main CRT Container -->
<div class="crt-container">
<div class="crt-screen">
<div class="scanlines"></div>
<div class="phosphor"></div>
<div class="screen-flicker"></div>
<div class="matrix-rain" id="matrixRain"></div>

<div class="terminal">
    <!-- Header -->
    <header class="terminal-header">
        <div class="company-logo">TERMINALCORP://INTRANET.v2</div>
        <div class="system-alerts">
            <span class="alert-badge warning">2 WARNINGS</span>
            <span class="alert-badge critical">DB HIGH LOAD</span>
        </div>
        <div class="status-bar">
            <div class="status-item">
                <span class="status-indicator online"></span>
                <span id="currentTime">--:--:--</span>
            </div>
            <div class="status-item">
                <span id="currentDate">----/--/--</span>
            </div>
            <div class="status-item">
                <span>USER:</span>
                <span id="username">guest</span>
            </div>
            <div class="status-item">
                <span>LVL:</span>
                <span id="userLevel">1</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="terminal-content">
        <!-- Left Panel - Main Terminal -->
        <div class="main-terminal">
            <div class="terminal-tabs">
                <div class="terminal-tab active" onclick="switchTab(0)">MAIN</div>
                <div class="terminal-tab" onclick="switchTab(1)">LOGS</div>
                <div class="terminal-tab" onclick="switchTab(2)">NETWORK</div>
            </div>
            <div class="output-area" id="outputArea">
                <div class="ascii-art">
_____                   _             _    ____                
|_   _|__ _ __ _ __ ___ (_)_ __   __ _| |  / ___|___  _ __ _ __  
| |/ _ \ '__| '_ ` _ \| | '_ \ / _` | | | |   / _ \| '__| '_ \ 
| |  __/ |  | | | | | | | | | | (_| | | | |__| (_) | |  | |_) |
|_|\___|_|  |_| |_| |_|_|_| |_|\__,_|_|  \____\___/|_|  | .__/ 
                                                |_|    
        [ SECURE TERMINAL ACCESS v2.0 ]
                </div>
                <div class="output-line system">System initialized with enhanced security protocols</div>
                <div class="output-line success">All primary systems operational</div>
                <div class="output-line info">Welcome to TerminalCorp Intranet - Your Digital Command Center</div>
                <div class="output-line">Type 'help' for available commands or 'tutorial' for interactive guide</div>
            </div>
            <div class="command-line">
                <span class="prompt" id="prompt">guest@terminalcorp:~$</span>
                <input type="text" id="commandInput" autofocus autocomplete="off" spellcheck="false">
                <span class="cursor"></span>
            </div>
        </div>

        <!-- Right Panel - Widgets -->
        <div class="widgets-panel">
            <!-- Calendar Widget -->
            <div class="widget">
                <div class="widget-header">
                    <div>
                        <span class="widget-icon">📅</span>
                        <span>CALENDAR</span>
                    </div>
                    <div class="widget-actions">
                        <div class="widget-action" onclick="refreshWidget('calendar')" title="Refresh">↻</div>
                        <div class="widget-action" onclick="maximizeWidget('calendar')" title="Maximize">□</div>
                    </div>
                </div>
                <div class="calendar-header">
                    <span class="calendar-nav" onclick="changeMonth(-1)">◄</span>
                    <span id="currentMonth">MARCH 2025</span>
                    <span class="calendar-nav" onclick="changeMonth(1)">►</span>
                </div>
                <div class="calendar-grid" id="calendarGrid">
                    <!-- Calendar will be generated by JS -->
                </div>
                <div class="event-list">
                    <div class="event-item">
                        <span class="event-time">09:00</span>
                        <span class="event-title">Team Standup</span>
                        <span class="event-location">[Dev-A]</span>
                    </div>
                    <div class="event-item">
                        <span class="event-time">14:00</span>
                        <span class="event-title">Sprint Planning</span>
                        <span class="event-location">[Conf-1]</span>
                    </div>
                    <div class="event-item">
                        <span class="event-time">16:30</span>
                        <span class="event-title">Code Review</span>
                        <span class="event-location">[Virtual]</span>
                    </div>
                </div>
            </div>

            <!-- Tasks Widget -->
            <div class="widget">
                <div class="widget-header">
                    <div>
                        <span class="widget-icon">✓</span>
                        <span>TASK TRACKER</span>
                    </div>
                    <div class="widget-actions">
                        <div class="widget-action" onclick="addNewTask()" title="Add Task">+</div>
                        <div class="widget-action" onclick="refreshWidget('tasks')" title="Refresh">↻</div>
                    </div>
                </div>
                <div class="task-stats">
                    <div class="task-stat">
                        <div class="task-stat-value" id="tasksTotal">8</div>
                        <div>Total</div>
                    </div>
                    <div class="task-stat">
                        <div class="task-stat-value" id="tasksComplete">3</div>
                        <div>Complete</div>
                    </div>
                    <div class="task-stat">
                        <div class="task-stat-value" id="tasksDue">2</div>
                        <div>Due Today</div>
                    </div>
                </div>
                <div class="task-list" id="taskList">
                    <div class="task-item">
                        <div class="task-checkbox" onclick="toggleTask(this)"></div>
                        <span class="task-priority high">HIGH</span>
                        <span class="task-text">Fix authentication bug</span>
                        <span class="task-due">TODAY</span>
                    </div>
                    <div class="task-item">
                        <div class="task-checkbox" onclick="toggleTask(this)"></div>
                        <span class="task-priority high">HIGH</span>
                        <span class="task-text">Deploy hotfix to production</span>
                        <span class="task-due">TODAY</span>
                    </div>
                    <div class="task-item">
                        <div class="task-checkbox" onclick="toggleTask(this)"></div>
                        <span class="task-priority medium">MED</span>
                        <span class="task-text">Update API documentation</span>
                        <span class="task-due">MAR 16</span>
                    </div>
                    <div class="task-item">
                        <div class="task-checkbox checked" onclick="toggleTask(this)"></div>
                        <span class="task-priority low">LOW</span>
                        <span class="task-text completed">Refactor helper functions</span>
                        <span class="task-due">MAR 20</span>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="taskProgress" style="width: 25%"></div>
                </div>
                <div class="output-line info" style="margin-top: 5px; font-size: 11px;">
                    Sprint Progress: <span id="sprintProgress">25%</span> (3/12 stories)
                </div>
            </div>

            <!-- System Status Widget -->
            <div class="widget">
                <div class="widget-header">
                    <div>
                        <span class="widget-icon">⚡</span>
                        <span>SYSTEM STATUS</span>
                    </div>
                    <div class="widget-actions">
                        <div class="widget-action" onclick="refreshWidget('status')" title="Refresh">↻</div>
                    </div>
                </div>
                <div class="system-grid">
                    <div class="server-item">
                        <div class="server-name">
                            <span class="server-status online"></span>
                            WEB-01
                        </div>
                        <div class="server-metrics">
                            <span>CPU: 45%</span>
                            <span>MEM: 3.2GB</span>
                        </div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 45%"></div>
                        </div>
                    </div>
                    <div class="server-item">
                        <div class="server-name">
                            <span class="server-status online"></span>
                            API-01
                        </div>
                        <div class="server-metrics">
                            <span>CPU: 32%</span>
                            <span>MEM: 2.1GB</span>
                        </div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 32%"></div>
                        </div>
                    </div>
                    <div class="server-item">
                        <div class="server-name">
                            <span class="server-status warning"></span>
                            DB-01
                        </div>
                        <div class="server-metrics">
                            <span>CPU: 89%</span>
                            <span>MEM: 7.8GB</span>
                        </div>
                        <div class="metric-bar">
                            <div class="metric-fill high" style="width: 89%"></div>
                        </div>
                    </div>
                    <div class="server-item">
                        <div class="server-name">
                            <span class="server-status online"></span>
                            CACHE-01
                        </div>
                        <div class="server-metrics">
                            <span>CPU: 12%</span>
                            <span>MEM: 512MB</span>
                        </div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 12%"></div>
                        </div>
                    </div>
                </div>
                <div class="network-activity">
                    <span>NET:</span>
                    <div class="activity-graph" id="networkGraph">
                        <!-- Activity bars<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TerminalCorp Intranet - Advanced Command Line Interface</title>
<style>
/* Reset and Base Styles */
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

:root {
--terminal-green: #33ff33;
--terminal-dim: #00cc00;
--terminal-bg: #0a0a0a;
--terminal-amber: #ffb000;
--terminal-cyan: #00ffff;
--terminal-red: #ff3333;
--terminal-yellow: #ffff33;
--terminal-purple: #ff33ff;
--terminal-white: #ffffff;
--glow-intensity: 0.4;
--font-size: 14px;
}

body {
font-family: 'Courier New', 'Monaco', 'Consolas', monospace;
background: #000;
color: var(--terminal-green);
overflow: hidden;
height: 100vh;
display: flex;
justify-content: center;
align-items: center;
font-size: var(--font-size);
line-height: 1.4;
position: relative;
}

/* Ambient Background */
body::before {
content: '';
position: absolute;
inset: 0;
background: 
    radial-gradient(circle at 20% 50%, rgba(51, 255, 51, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 80% 50%, rgba(51, 255, 51, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 50% 20%, rgba(0, 255, 255, 0.03) 0%, transparent 50%);
animation: ambient-shift 20s ease-in-out infinite;
}

@keyframes ambient-shift {
0%, 100% { transform: scale(1) rotate(0deg); }
50% { transform: scale(1.1) rotate(5deg); }
}

/* CRT Monitor Effect */
.crt-container {
position: relative;
width: 95vw;
height: 95vh;
max-width: 1600px;
max-height: 900px;
background: 
    radial-gradient(ellipse at center, #0f0f0f 0%, #000 100%);
border-radius: 20px;
box-shadow: 
    0 0 100px rgba(51, 255, 51, 0.2),
    0 0 200px rgba(51, 255, 51, 0.1),
    inset 0 0 50px rgba(0, 0, 0, 0.8),
    inset 0 0 100px rgba(0, 0, 0, 0.5);
overflow: hidden;
transform: perspective(1000px) rotateX(0.5deg);
}

.crt-container::before {
content: '';
position: absolute;
inset: -5%;
background: 
    repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.01) 2px,
        rgba(255, 255, 255, 0.01) 4px
    );
pointer-events: none;
z-index: 1001;
}

.crt-screen {
position: absolute;
inset: 20px;
background: var(--terminal-bg);
border-radius: 10px;
overflow: hidden;
box-shadow: 
    inset 0 0 30px rgba(51, 255, 51, 0.1),
    inset 0 0 60px rgba(0, 0, 0, 0.8),
    0 0 20px rgba(51, 255, 51, var(--glow-intensity));
}

/* Scanlines Enhanced */
.scanlines {
position: absolute;
inset: 0;
background: 
    repeating-linear-gradient(
        0deg,
        transparent,
        transparent 1px,
        rgba(0, 0, 0, 0.03) 1px,
        rgba(0, 0, 0, 0.03) 2px
    );
pointer-events: none;
opacity: 0.4;
z-index: 1000;
animation: scanline-scroll 8s linear infinite;
}

@keyframes scanline-scroll {
0% { transform: translateY(0); }
100% { transform: translateY(10px); }
}

/* Screen Flicker */
.screen-flicker {
position: absolute;
inset: 0;
background: rgba(255, 255, 255, 0.01);
pointer-events: none;
z-index: 1002;
opacity: 0;
animation: flicker 0.15s infinite;
}

@keyframes flicker {
0% { opacity: 0; }
50% { opacity: 0.01; }
100% { opacity: 0; }
}

/* Phosphor Glow Enhanced */
.phosphor {
position: absolute;
inset: 0;
background: 
    radial-gradient(
        ellipse at center,
        transparent 0%,
        rgba(51, 255, 51, 0.03) 40%,
        rgba(51, 255, 51, 0.01) 100%
    );
pointer-events: none;
z-index: 999;
mix-blend-mode: screen;
}

/* Terminal Container */
.terminal {
height: 100%;
display: flex;
flex-direction: column;
padding: 20px;
overflow: hidden;
position: relative;
}

/* Header Enhanced */
.terminal-header {
display: grid;
grid-template-columns: auto 1fr auto;
align-items: center;
gap: 20px;
margin-bottom: 20px;
padding-bottom: 10px;
border-bottom: 2px solid var(--terminal-dim);
position: relative;
}

.terminal-header::after {
content: '';
position: absolute;
bottom: -2px;
left: 0;
width: 100%;
height: 2px;
background: linear-gradient(90deg, 
    transparent, 
    var(--terminal-green) 20%, 
    var(--terminal-green) 80%, 
    transparent);
animation: header-glow 3s ease-in-out infinite;
}

@keyframes header-glow {
0%, 100% { opacity: 0.5; transform: scaleX(0.5); }
50% { opacity: 1; transform: scaleX(1); }
}

.company-logo {
font-size: 24px;
font-weight: bold;
letter-spacing: 0.2em;
text-shadow: 
    0 0 10px currentColor,
    0 0 20px currentColor,
    0 0 30px rgba(51, 255, 51, 0.5);
animation: pulse-glow 2s ease-in-out infinite;
position: relative;
}

.system-alerts {
display: flex;
gap: 10px;
justify-content: center;
}

.alert-badge {
padding: 2px 8px;
border-radius: 3px;
font-size: 11px;
animation: alert-pulse 1s ease-in-out infinite;
}

.alert-badge.critical {
background: rgba(255, 51, 51, 0.2);
border: 1px solid var(--terminal-red);
color: var(--terminal-red);
}

.alert-badge.warning {
background: rgba(255, 176, 0, 0.2);
border: 1px solid var(--terminal-amber);
color: var(--terminal-amber);
}

@keyframes alert-pulse {
0%, 100% { opacity: 0.7; }
50% { opacity: 1; }
}

.status-bar {
display: flex;
gap: 20px;
font-size: 12px;
align-items: center;
}

.status-item {
display: flex;
align-items: center;
gap: 5px;
position: relative;
}

.status-item::after {
content: '';
position: absolute;
bottom: -2px;
left: 0;
right: 0;
height: 1px;
background: currentColor;
opacity: 0.3;
transform: scaleX(0);
transition: transform 0.3s;
}

.status-item:hover::after {
transform: scaleX(1);
}

.status-indicator {
width: 8px;
height: 8px;
border-radius: 50%;
position: relative;
animation: status-pulse 2s infinite;
}

.status-indicator::before {
content: '';
position: absolute;
inset: -2px;
border-radius: 50%;
background: inherit;
opacity: 0.5;
animation: status-ring 1.5s ease-out infinite;
}

@keyframes status-pulse {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.2); }
}

@keyframes status-ring {
0% { transform: scale(1); opacity: 0.5; }
100% { transform: scale(2); opacity: 0; }
}

.status-indicator.online {
background: var(--terminal-green);
box-shadow: 0 0 10px var(--terminal-green);
}

.status-indicator.busy {
background: var(--terminal-amber);
box-shadow: 0 0 10px var(--terminal-amber);
}

.status-indicator.offline {
background: var(--terminal-red);
box-shadow: 0 0 10px var(--terminal-red);
}

/* Main Content Area */
.terminal-content {
flex: 1;
display: grid;
grid-template-columns: 2fr 1fr;
gap: 20px;
overflow: hidden;
}

/* Left Panel - Main Terminal Enhanced */
.main-terminal {
display: flex;
flex-direction: column;
position: relative;
}

.terminal-tabs {
display: flex;
gap: 2px;
margin-bottom: 10px;
border-bottom: 1px solid var(--terminal-dim);
}

.terminal-tab {
padding: 5px 15px;
background: rgba(0, 0, 0, 0.3);
border: 1px solid transparent;
border-bottom: none;
cursor: pointer;
transition: all 0.3s;
position: relative;
overflow: hidden;
}

.terminal-tab::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(51, 255, 51, 0.2), transparent);
transition: left 0.5s;
}

.terminal-tab:hover::before {
left: 100%;
}

.terminal-tab.active {
background: rgba(51, 255, 51, 0.1);
border-color: var(--terminal-dim);
border-bottom-color: var(--terminal-bg);
}

.output-area {
flex: 1;
overflow-y: auto;
overflow-x: hidden;
padding: 15px;
background: rgba(0, 0, 0, 0.3);
border: 1px solid var(--terminal-dim);
border-radius: 5px;
margin-bottom: 10px;
font-family: 'Monaco', 'Consolas', monospace;
scrollbar-width: thin;
scrollbar-color: var(--terminal-dim) transparent;
position: relative;
}

.output-area::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 20px;
background: linear-gradient(to bottom, var(--terminal-bg), transparent);
pointer-events: none;
z-index: 10;
}

.output-area::-webkit-scrollbar {
width: 8px;
}

.output-area::-webkit-scrollbar-thumb {
background: var(--terminal-dim);
border-radius: 4px;
box-shadow: 0 0 5px var(--terminal-dim);
}

.output-area::-webkit-scrollbar-thumb:hover {
background: var(--terminal-green);
}

.command-line {
display: flex;
align-items: center;
padding: 12px;
background: rgba(0, 0, 0, 0.5);
border: 1px solid var(--terminal-dim);
border-radius: 5px;
position: relative;
overflow: hidden;
}

.command-line::before {
content: '';
position: absolute;
inset: 0;
background: linear-gradient(90deg, transparent, rgba(51, 255, 51, 0.05), transparent);
animation: command-scan 3s linear infinite;
}

@keyframes command-scan {
0% { transform: translateX(-100%); }
100% { transform: translateX(100%); }
}

.prompt {
color: var(--terminal-cyan);
margin-right: 10px;
font-weight: bold;
text-shadow: 0 0 5px currentColor;
}

#commandInput {
flex: 1;
background: transparent;
border: none;
color: var(--terminal-green);
font-family: inherit;
font-size: inherit;
outline: none;
caret-color: transparent;
position: relative;
z-index: 2;
}

.cursor {
display: inline-block;
width: 10px;
height: 18px;
background: var(--terminal-green);
animation: cursor-blink 1s infinite;
margin-left: 2px;
box-shadow: 0 0 5px var(--terminal-green);
}

@keyframes cursor-blink {
0%, 49% { opacity: 1; }
50%, 100% { opacity: 0; }
}

/* Right Panel - Widgets Enhanced */
.widgets-panel {
display: flex;
flex-direction: column;
gap: 15px;
overflow-y: auto;
overflow-x: hidden;
padding-right: 10px;
scrollbar-width: thin;
scrollbar-color: var(--terminal-dim) transparent;
}

.widgets-panel::-webkit-scrollbar {
width: 6px;
}

.widgets-panel::-webkit-scrollbar-thumb {
background: var(--terminal-dim);
border-radius: 3px;
}

.widget {
background: rgba(0, 0, 0, 0.3);
border: 1px solid var(--terminal-dim);
border-radius: 5px;
padding: 15px;
position: relative;
overflow: hidden;
animation: widget-slide-in 0.5s ease-out forwards;
opacity: 0;
transform: translateX(20px);
}

.widget::before {
content: '';
position: absolute;
top: -2px;
left: -2px;
right: -2px;
height: 2px;
background: linear-gradient(90deg, transparent, var(--terminal-green), transparent);
animation: widget-scan 3s linear infinite;
}

@keyframes widget-scan {
0% { transform: translateX(-100%); }
100% { transform: translateX(100%); }
}

@keyframes widget-slide-in {
to {
    opacity: 1;
    transform: translateX(0);
}
}

.widget:nth-child(1) { animation-delay: 0.1s; }
.widget:nth-child(2) { animation-delay: 0.2s; }
.widget:nth-child(3) { animation-delay: 0.3s; }
.widget:nth-child(4) { animation-delay: 0.4s; }
.widget:nth-child(5) { animation-delay: 0.5s; }

.widget-header {
font-weight: bold;
margin-bottom: 10px;
color: var(--terminal-cyan);
display: flex;
align-items: center;
justify-content: space-between;
text-shadow: 0 0 5px currentColor;
}

.widget-icon {
font-size: 18px;
margin-right: 8px;
}

.widget-actions {
display: flex;
gap: 5px;
}

.widget-action {
width: 20px;
height: 20px;
border: 1px solid var(--terminal-dim);
border-radius: 3px;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
font-size: 12px;
transition: all 0.2s;
}

.widget-action:hover {
background: rgba(51, 255, 51, 0.2);
border-color: var(--terminal-green);
transform: scale(1.1);
}

/* Calendar Widget Enhanced */
.calendar-grid {
display: grid;
grid-template-columns: repeat(7, 1fr);
gap: 3px;
font-size: 11px;
text-align: center;
margin-bottom: 10px;
}

.calendar-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
font-size: 13px;
}

.calendar-nav {
cursor: pointer;
padding: 2px 6px;
border: 1px solid var(--terminal-dim);
border-radius: 3px;
transition: all 0.2s;
}

.calendar-nav:hover {
background: rgba(51, 255, 51, 0.2);
border-color: var(--terminal-green);
}

.calendar-day {
padding: 6px;
border: 1px solid transparent;
cursor: pointer;
transition: all 0.2s;
position: relative;
background: rgba(0, 0, 0, 0.2);
}

.calendar-day:hover {
border-color: var(--terminal-green);
background: rgba(51, 255, 51, 0.1);
transform: scale(1.1);
z-index: 10;
box-shadow: 0 0 10px rgba(51, 255, 51, 0.3);
}

.calendar-day.today {
background: var(--terminal-green);
color: var(--terminal-bg);
font-weight: bold;
box-shadow: 0 0 10px var(--terminal-green);
animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.05); }
}

.calendar-day.has-event {
color: var(--terminal-amber);
font-weight: bold;
}

.calendar-day.has-event::after {
content: '•';
position: absolute;
bottom: 2px;
right: 2px;
color: var(--terminal-amber);
font-size: 8px;
}

.calendar-day.weekend {
color: var(--terminal-dim);
}

.event-list {
font-size: 11px;
max-height: 100px;
overflow-y: auto;
}

.event-item {
display: flex;
align-items: center;
gap: 8px;
padding: 4px 0;
border-left: 2px solid transparent;
padding-left: 8px;
transition: all 0.2s;
}

.event-item:hover {
border-left-color: var(--terminal-green);
background: rgba(51, 255, 51, 0.05);
}

.event-time {
color: var(--terminal-cyan);
font-weight: bold;
min-width: 45px;
}

.event-title {
flex: 1;
}

.event-location {
color: var(--terminal-dim);
font-size: 10px;
}

/* Task Widget Enhanced */
.task-stats {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 10px;
margin-bottom: 10px;
text-align: center;
font-size: 11px;
}

.task-stat {
padding: 5px;
background: rgba(0, 0, 0, 0.3);
border: 1px solid var(--terminal-dim);
border-radius: 3px;
}

.task-stat-value {
font-size: 16px;
font-weight: bold;
color: var(--terminal-green);
}

.task-list {
display: flex;
flex-direction: column;
gap: 6px;
max-height: 200px;
overflow-y: auto;
padding-right: 5px;
}

.task-item {
display: flex;
align-items: center;
gap: 8px;
padding: 6px;
background: rgba(0, 0, 0, 0.2);
border: 1px solid transparent;
border-radius: 3px;
transition: all 0.2s;
cursor: pointer;
}

.task-item:hover {
border-color: var(--terminal-dim);
background: rgba(51, 255, 51, 0.05);
transform: translateX(5px);
}

.task-checkbox {
width: 14px;
height: 14px;
border: 1px solid var(--terminal-dim);
border-radius: 2px;
cursor: pointer;
position: relative;
transition: all 0.2s;
}

.task-checkbox:hover {
border-color: var(--terminal-green);
box-shadow: 0 0 5px var(--terminal-green);
}

.task-checkbox.checked {
background: var(--terminal-green);
border-color: var(--terminal-green);
}

.task-checkbox.checked::after {
content: '✓';
position: absolute;
top: -2px;
left: 1px;
color: var(--terminal-bg);
font-size: 12px;
font-weight: bold;
}

.task-priority {
font-size: 10px;
padding: 2px 6px;
border-radius: 2px;
font-weight: bold;
text-transform: uppercase;
}

.task-priority.high {
background: rgba(255, 51, 51, 0.2);
color: var(--terminal-red);
border: 1px solid var(--terminal-red);
}

.task-priority.medium {
background: rgba(255, 176, 0, 0.2);
color: var(--terminal-amber);
border: 1px solid var(--terminal-amber);
}

.task-priority.low {
background: rgba(0, 204, 0, 0.2);
color: var(--terminal-dim);
border: 1px solid var(--terminal-dim);
}

.task-text {
flex: 1;
font-size: 12px;
}

.task-text.completed {
text-decoration: line-through;
opacity: 0.5;
}

.task-due {
font-size: 10px;
color: var(--terminal-amber);
}

.progress-bar {
height: 6px;
background: rgba(51, 255, 51, 0.1);
border: 1px solid var(--terminal-dim);
border-radius: 3px;
overflow: hidden;
margin-top: 8px;
position: relative;
}

.progress-fill {
height: 100%;
background: linear-gradient(90deg, var(--terminal-dim), var(--terminal-green));
transition: width 0.5s ease-out;
box-shadow: 0 0 10px var(--terminal-green);
position: relative;
}

.progress-fill::after {
content: '';
position: absolute;
top: 0;
right: 0;
width: 10px;
height: 100%;
background: rgba(255, 255, 255, 0.5);
animation: progress-shine 2s linear infinite;
}

@keyframes progress-shine {
0% { transform: translateX(-20px); }
100% { transform: translateX(20px); }
}

/* System Status Widget Enhanced */
.system-grid {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 8px;
margin-bottom: 10px;
}

.server-item {
padding: 8px;
background: rgba(0, 0, 0, 0.3);
border: 1px solid var(--terminal-dim);
border-radius: 3px;
transition: all 0.2s;
cursor: pointer;
}

.server-item:hover {
border-color: var(--terminal-green);
transform: scale(1.02);
}

.server-name {
font-size: 11px;
font-weight: bold;
margin-bottom: 4px;
display: flex;
align-items: center;
gap: 5px;
}

.server-status {
width: 6px;
height: 6px;
border-radius: 50%;
display: inline-block;
}

.server-status.online {
background: var(--terminal-green);
box-shadow: 0 0 5px var(--terminal-green);
}

.server-status.warning {
background: var(--terminal-amber);
box-shadow: 0 0 5px var(--terminal-amber);
animation: warning-blink 1s infinite;
}

@keyframes warning-blink {
0%, 100% { opacity: 1; }
50% { opacity: 0.3; }
}

.server-metrics {
display: flex;
justify-content: space-between;
font-size: 10px;
color: var(--terminal-dim);
}

.metric-bar {
height: 3px;
background: rgba(51, 255, 51, 0.2);
border-radius: 1px;
overflow: hidden;
margin-top: 2px;
}

.metric-fill {
height: 100%;
background: var(--terminal-green);
transition: width 0.3s;
}

.metric-fill.high {
background: var(--terminal-red);
}

.metric-fill.medium {
background: var(--terminal-amber);
}

/* Network Activity */
.network-activity {
display: flex;
gap: 10px;
align-items: center;
padding: 8px;
background: rgba(0, 0, 0, 0.3);
border-radius: 3px;
font-size: 11px;
}

.activity-graph {
flex: 1;
height: 30px;
display: flex;
align-items: flex-end;
gap: 2px;
}

.activity-bar {
flex: 1;
background: var(--terminal-green);
opacity: 0.3;
transition: all 0.3s;
border-radius: 1px 1px 0 0;
}

.activity-bar.active {
opacity: 1;
box-shadow: 0 0 5px var(--terminal-green);
}

/* Weather Widget Enhanced */
.weather-main {
display: flex;
align-items: center;
gap: 15px;
margin-bottom: 10px;
padding: 10px;
background: rgba(0, 0, 0, 0.3);
border-radius: 5px;
}

.weather-icon {
font-size: 48px;
animation: weather-float 3s ease-in-out infinite;
}

@keyframes weather-float {
0%, 100% { transform: translateY(0); }
50% { transform: translateY(-5px); }
}

.weather-details {
flex: 1;
}

.temperature {
font-size: 28px;
font-weight: bold;
color: var(--terminal-amber);
text-shadow: 0 0 10px currentColor;
}

.weather-desc {
font-size: 12px;
color: var(--terminal-cyan);
}

.weather-stats {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 8px;
font-size: 11px;
}

.weather-stat {
text-align: center;
padding: 5px;
background: rgba(0, 0, 0, 0.2);
border-radius: 3px;
}

.weather-label {
color: var(--terminal-dim);
font-size: 10px;
}

.weather-value {
color: var(--terminal-green);
font-weight: bold;
}

/* Quick Actions Enhanced */
.quick-actions {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 8px;
}

.action-btn {
padding: 10px 5px;
background: rgba(51, 255, 51, 0.05);
border: 1px solid var(--terminal-dim);
border-radius: 3px;
text-align: center;
cursor: pointer;
transition: all 0.2s;
font-size: 11px;
position: relative;
overflow: hidden;
}

.action-btn::before {
content: '';
position: absolute;
top: 50%;
left: 50%;
width: 0;
height: 0;
background: rgba(51, 255, 51, 0.3);
border-radius: 50%;
transform: translate(-50%, -50%);
transition: all 0.5s;
}

.action-btn:hover::before {
width: 100px;
height: 100px;
}

.action-btn:hover {
border-color: var(--terminal-green);
color: var(--terminal-green);
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(51, 255, 51, 0.3);
}

.action-btn:active {
transform: translateY(0);
}

.action-icon {
font-size: 20px;
margin-bottom: 5px;
display: block;
}

/* ASCII Art Styles */
.ascii-art {
font-size: 10px;
line-height: 1;
white-space: pre;
color: var(--terminal-dim);
margin: 10px 0;
text-align: center;
animation: ascii-glow 3s ease-in-out infinite;
}

@keyframes ascii-glow {
0%, 100% { opacity: 0.5; }
50% { opacity: 1; }
}

.ascii-logo {
font-size: 8px;
line-height: 1.2;
white-space: pre;
color: var(--terminal-green);
text-shadow: 0 0 5px currentColor;
}

/* Animations */
@keyframes pulse-glow {
0%, 100% { 
    text-shadow: 
        0 0 10px currentColor,
        0 0 20px currentColor; 
}
50% { 
    text-shadow: 
        0 0 20px currentColor,
        0 0 30px currentColor,
        0 0 40px currentColor; 
}
}

@keyframes fade-in {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

@keyframes typing {
from { width: 0; }
to { width: 100%; }
}

.typing-effect {
overflow: hidden;
white-space: nowrap;
animation: typing 0.5s steps(40, end);
}

/* Command Output Styles Enhanced */
.output-line {
margin: 3px 0;
position: relative;
padding-left: 20px;
animation: line-appear 0.1s ease-out;
}

@keyframes line-appear {
from { 
    opacity: 0;
    transform: translateX(-10px);
}
to {
    opacity: 1;
    transform: translateX(0);
}
}

.output-line::before {
content: '>';
position: absolute;
left: 0;
color: var(--terminal-dim);
}

.output-line.error {
color: var(--terminal-red);
}

.output-line.error::before {
content: '✗';
color: var(--terminal-red);
}

.output-line.success {
color: var(--terminal-green);
}

.output-line.success::before {
content: '✓';
color: var(--terminal-green);
}

.output-line.info {
color: var(--terminal-cyan);
}

.output-line.info::before {
content: 'ℹ';
color: var(--terminal-cyan);
}

.output-line.warning {
color: var(--terminal-amber);
}

.output-line.warning::before {
content: '⚠';
color: var(--terminal-amber);
}

.output-line.system {
color: var(--terminal-purple);
font-style: italic;
}

.output-line.system::before {
content: '◆';
color: var(--terminal-purple);
}

/* Command Syntax Highlighting */
.command-text {
color: var(--terminal-green);
}

.command-arg {
color: var(--terminal-cyan);
}

.command-flag {
color: var(--terminal-amber);
}

.command-string {
color: var(--terminal-yellow);
}

/* Help Menu Enhanced */
.help-grid {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 20px;
margin: 15px 0;
}

.help-category {
background: rgba(0, 0, 0, 0.3);
padding: 10px;
border: 1px solid var(--terminal-dim);
border-radius: 5px;
}

.help-category-title {
color: var(--terminal-cyan);
font-weight: bold;
margin-bottom: 8px;
text-transform: uppercase;
font-size: 12px;
letter-spacing: 0.1em;
}

.help-commands {
display: flex;
flex-direction: column;
gap: 5px;
}

.help-command {
display: grid;
grid-template-columns: 140px 1fr;
gap: 15px;
padding: 3px 0;
transition: all 0.2s;
}

.help-command:hover {
background: rgba(51, 255, 51, 0.05);
padding-left: 5px;
}

.help-command-name {
color: var(--terminal-green);
font-weight: bold;
}

.help-command-desc {
color: var(--terminal-dim);
font-size: 12px;
}

/* Table Styles */
.data-table {
width: 100%;
border-collapse: collapse;
font-size: 12px;
margin: 10px 0;
}

.data-table th {
text-align: left;
padding: 8px;
border-bottom: 2px solid var(--terminal-dim);
color: var(--terminal-cyan);
font-weight: bold;
text-transform: uppercase;
letter-spacing: 0.1em;
}

.data-table td {
padding: 6px 8px;
border-bottom: 1px solid rgba(51, 255, 51, 0.1);
}

.data-table tr:hover {
background: rgba(51, 255, 51, 0.05);
}

/* Chart Styles */
.ascii-chart {
font-family: monospace;
font-size: 10px;
line-height: 1.2;
color: var(--terminal-green);
}

.chart-bar {
display: inline-block;
background: var(--terminal-green);
height: 10px;
margin: 0 2px;
vertical-align: bottom;
transition: all 0.3s;
}

.chart-bar:hover {
background: var(--terminal-cyan);
transform: scaleY(1.1);
}

/* Loading Animation */
.loading {
display: inline-block;
animation: loading-spin 1s linear infinite;
}

@keyframes loading-spin {
0% { content: '◐'; }
25% { content: '◓'; }
50% { content: '◑'; }
75% { content: '◒'; }
100% { content: '◐'; }
}

.loading::after {
content: '◐';
animation: loading-spin 1s steps(4) infinite;
}

/* Matrix Rain Effect Enhanced */
.matrix-rain {
position: fixed;
inset: 0;
pointer-events: none;
opacity: 0;
transition: opacity 0.5s;
z-index: 998;
}

.matrix-rain.active {
opacity: 0.15;
}

.rain-column {
position: absolute;
top: -100%;
font-size: 14px;
line-height: 1;
animation: rain-fall linear infinite;
color: var(--terminal-green);
text-shadow: 0 0 5px currentColor;
}

@keyframes rain-fall {
to { transform: translateY(200vh); }
}

.rain-column span {
display: block;
opacity: 0.8;
animation: char-fade 2s linear infinite;
}

@keyframes char-fade {
0%, 50% { opacity: 1; }
100% { opacity: 0.1; }
}

/* Notification System */
.notification-container {
position: fixed;
top: 20px;
right: 20px;
z-index: 2000;
display: flex;
flex-direction: column;
gap: 10px;
}

.notification {
background: var(--terminal-bg);
border: 1px solid var(--terminal-green);
border-radius: 5px;
padding: 15px 20px;
min-width: 300px;
box-shadow: 0 0 20px rgba(51, 255, 51, 0.5);
animation: notification-slide 0.3s ease-out;
position: relative;
overflow: hidden;
}

.notification::before {
content: '';
position: absolute;
top: 0;
left: 0;
height: 100%;
width: 3px;
background: var(--terminal-green);
}

@keyframes notification-slide {
from {
    transform: translateX(100%);
    opacity: 0;
}
to {
    transform: translateX(0);
    opacity: 1;
}
}

.notification-title {
font-weight: bold;
color: var(--terminal-cyan);
margin-bottom: 5px;
}

.notification-message {
color: var(--terminal-green);
font-size: 13px;
}

.notification-close {
position: absolute;
top: 5px;
right: 10px;
cursor: pointer;
color: var(--terminal-dim);
transition: color 0.2s;
}

.notification-close:hover {
color: var(--terminal-green);
}

/* Responsive Design Enhanced */
@media (max-width: 1200px) {
.terminal-content {
    grid-template-columns: 1fr;
}

.widgets-panel {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    grid-auto-rows: min-content;
}
}

@media (max-width: 768px) {
:root {
    --font-size: 12px;
}

.terminal-header {
    grid-template-columns: 1fr;
    text-align: center;
}

.system-alerts {
    justify-content: center;
}

.status-bar {
    justify-content: center;
    margin-top: 10px;
}

.widgets-panel {
    grid-template-columns: 1fr;
}

.help-grid {
    grid-template-columns: 1fr;
}

.quick-actions {
    grid-template-columns: repeat(2, 1fr);
}
}

/* Boot Sequence Enhanced */
.boot-sequence {
position: fixed;
inset: 0;
background: var(--terminal-bg);
z-index: 9999;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
font-family: 'Courier New', monospace;
overflow: hidden;
}

.boot-logo {
margin-bottom: 30px;
opacity: 0;
animation: boot-logo-appear 0.5s forwards;
}

@keyframes boot-logo-appear {
to {
    opacity: 1;
    transform: scale(1) rotate(0);
}
from {
    opacity: 0;
    transform: scale(0.8) rotate(-10deg);
}
}

.boot-text {
color: var(--terminal-green);
margin: 3px 0;
opacity: 0;
animation: boot-fade-in 0.2s forwards;
font-size: 13px;
}

.boot-progress {
width: 300px;
height: 4px;
background: rgba(51, 255, 51, 0.2);
border: 1px solid var(--terminal-dim);
border-radius: 2px;
margin-top: 20px;
overflow: hidden;
}

.boot-progress-bar {
height: 100%;
background: var(--terminal-green);
width: 0;
animation: boot-load 2s ease-out forwards;
box-shadow: 0 0 10px var(--terminal-green);
}

@keyframes boot-load {
to { width: 100%; }
}

@keyframes boot-fade-in {
to { opacity: 1; }
}

/* Easter Egg Styles */
.konami-activated {
animation: konami-flash 0.5s;
}

@keyframes konami-flash {
0%, 100% { filter: hue-rotate(0deg); }
50% { filter: hue-rotate(180deg); }
}

.secret-mode {
position: fixed;
bottom: 20px;
left: 20px;
padding: 10px 15px;
background: rgba(255, 51, 255, 0.2);
border: 1px solid var(--terminal-purple);
border-radius: 5px;
color: var(--terminal-purple);
font-size: 12px;
opacity: 0;
transform: translateY(20px);
transition: all 0.5s;
z-index: 1000;
}

.secret-mode.active {
opacity: 1;
transform: translateY(0);
}

/* Performance Optimizations */
.terminal * {
will-change: auto;
}

.terminal .animating {
will-change: transform, opacity;
}

/* Print Styles */
@media print {
body {
    background: white;
    color: black;
}

.crt-container {
    box-shadow: none;
    border: 1px solid #ccc;
}

.scanlines,
.phosphor,
.matrix-rain,
.screen-flicker {
    display: none;
}
}